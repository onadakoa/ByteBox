module.exports={77403:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({RequireAuth:()=>b});var d=a.i(74420),e=a.i(18656),f=a.i(81658);let b=a=>{let b=(0,e.useRouter)(),{isLoggedIn:c,user:g,error:h,isLoading:i}=(0,f.default)();if(i)return(0,d.jsx)(d.Fragment,{});let j=()=>{console.error("RequireAuth: ","redirecting to '",a.href||"/","'"),"back"===a.href&&b.back(),b.push(a.href||"/")};return("loggedIn"!==a.type||c)&&("admin"!==a.type||c&&0!==g.permission)?"loggedOut"===a.type&&c&&j():j(),(0,d.jsx)(d.Fragment,{})}}},80278:a=>{var{g:b,__dirname:c}=a;a.v({className:"poppins_9ac3ec3-module__ogIsha__className"})},79916:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(80278);let b={className:d.default.className,style:{fontFamily:"'Poppins', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},51480:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_d5b2c989-module__7PeVaG__className"})},87570:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(51480);let b={className:d.default.className,style:{fontFamily:"'Roboto', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},68953:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570)},20736:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570),a.i(68953)},25098:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({poppins:()=>d.default});var d=a.i(79916)},53235:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({mutate:()=>d.j});var d=a.i(80661)},18656:function(a){var{g:b,__dirname:c,m:d,e:e}=a;d.exports=a.r(93433)},81658:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>e});var d=a.i(26420);function e(){let{data:a,error:b,isLoading:c}=(0,d.default)("/user/index.php",{shouldRetryOnError:!1}),e=!0;return b&&(e=!1,console.log("useUser: ",JSON.stringify(b))),{isLoading:c,isLoggedIn:e,data:a,user:a?.d,error:b}}},38346:a=>{var{g:b,__dirname:c}=a;a.v({container:"List-module__gn99Za__container"})},42822:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ListContextProvider:()=>f,ListPropertiesContext:()=>b,useListContext:()=>g});var d=a.i(74420),e=a.i(22851);let b=(0,e.createContext)({});function f(a){return(0,d.jsx)(b.Provider,{value:a,children:a.children})}function g(){return(0,e.useContext)(b)}}},64922:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({List:()=>b});var d=a.i(74420),e=a.i(38346);a.i(20736);var f=a.i(25098),g=a.i(42822);let b=a=>{let b={border:a.border};return(0,d.jsx)("div",{className:[f.poppins.className,e.default.container,a.className].join(" "),style:b,children:(0,d.jsx)("div",{children:(0,d.jsx)(g.ListContextProvider,{gridTemplateColumns:a.gridTemplateColumns,children:a.children})})})}}},8831:a=>{var{g:b,__dirname:c}=a;a.v({container:"ListRow-module__KhJOla__container",header:"ListRow-module__KhJOla__header"})},94472:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ListRowHeader:()=>h,default:()=>g});var d=a.i(74420),e=a.i(8831),f=a.i(42822);function g(a){let b=(0,f.useListContext)(),c={padding:a.padding,gridTemplateColumns:b.gridTemplateColumns};return(0,d.jsx)("div",{className:[e.default.container,a.className].join(" "),style:c,children:a.children})}function h(a){let b=(0,f.useListContext)(),c={padding:a.padding,gridTemplateColumns:b.gridTemplateColumns};return(0,d.jsx)("div",{className:[e.default.container,e.default.header,a.className].join(" "),style:c,children:a.children})}},27324:a=>{var{g:b,__dirname:c}=a;a.v({container:"ListCell-module__ZsMQza__container"})},59919:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ListCell:()=>b});var d=a.i(74420),e=a.i(27324);let b=a=>{let b={padding:a.padding,justifyContent:a.centerHorizontal?"center":void 0,textAlign:a.centerHorizontal?"center":void 0};return(0,d.jsx)("div",{className:[e.default.container,a.className].join(" "),style:b,children:a.children})}}},69634:a=>{var{g:b,__dirname:c}=a;a.v({container:"ManagerButton-module__cUw3dG__container"})},96941:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ManagerButton:()=>g});var d=a.i(74420),e=a.i(69634),f=a.i(16486);function g(a){let b={width:a.width,padding:a.padding};return a.href?(0,d.jsx)(f.default,{href:a.href,children:(0,d.jsx)("button",{className:e.default.container,style:b,disabled:a.disabled,children:a.children})}):(0,d.jsx)("button",{onClick:a.onClick,className:e.default.container,style:b,disabled:a.disabled,children:a.children})}},35757:a=>{var{g:b,__dirname:c}=a;a.v({container:"Badge-module__6EVb2G__container",default:"Badge-module__6EVb2G__default",error:"Badge-module__6EVb2G__error",info:"Badge-module__6EVb2G__info",pending:"Badge-module__6EVb2G__pending",success:"Badge-module__6EVb2G__success"})},80010:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>f});var d=a.i(74420),e=a.i(35757);function f(a){let b={backgroundColor:a.backgroundColor,borderColor:a.borderColor,border:a.border,color:a.color,padding:a.padding};return(0,d.jsx)("div",{className:[e.default.container,a.variant?e.default[a.variant]:void 0,a.className].join(" "),style:b,children:a.children})}},24741:a=>{var{g:b,__dirname:c}=a;a.v({container:"ExpandableRow-module__76n8nG__container",content:"ExpandableRow-module__76n8nG__content",expanded:"ExpandableRow-module__76n8nG__expanded"})},4501:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ExpandableRow:()=>h});var d=a.i(74420),e=a.i(24741),f=a.i(22851),g=a.i(94472);function h(a){let[b,c]=f.default.useState(!1),h={padding:a.padding},i={paddingLeft:a.indentation?a.indentation:void 0};return(0,d.jsxs)("div",{className:[a.className,e.default.container,b?e.default.expanded:void 0].join(" "),style:h,onClick:()=>{c(!b)},children:[(0,d.jsx)(g.default,{children:a.children}),(0,d.jsx)("div",{className:e.default.content,style:i,children:(0,d.jsx)("div",{onClick:a=>{a.stopPropagation()},style:{backgroundColor:a.backgroundColor},children:a.content})})]})}},55466:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({OrderStatus:()=>d});var d=function(a){return a.pending="pending",a.paid="paid",a.shipping="shipping",a.delivered="delivered",a.canceled="canceled",a}({})},89657:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>e});var d=a.i(26420);function e(){let{data:a,isLoading:b,error:c}=(0,d.default)("/order/index.php");return c&&console.error("useOrders: ",c),{isLoading:b,error:c,data:a,orders:a?.d}}},53509:a=>{var{g:b,__dirname:c}=a;a.v({list:"page-module__mLYUYG__list",mainContainer:"page-module__mLYUYG__mainContainer"})},42520:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ClientOrdersManager:()=>b});var d=a.i(74420),e=a.i(22851),f=a.i(89657),g=a.i(64922),h=a.i(94472),i=a.i(59919),j=a.i(80010),k=a.i(4501),l=a.i(55466),m=a.i(53235),n=a.i(53509),o=a.i(96941);let b=()=>{let{orders:a,isLoading:b,error:c}=(0,f.default)(),[p,q]=(0,e.useState)(new Set),r=async a=>{if(!p.has(a)){q(b=>new Set(b).add(a));try{if(!(await fetch(`/api/order/cancel.php?id=${a}`,{method:"GET",credentials:"include"})).ok)throw Error("Failed to cancel order");(0,m.mutate)("/order/index.php")}catch(a){console.error("Error canceling order:",a)}finally{q(b=>{let c=new Set(b);return c.delete(a),c})}}},s=a=>{let b=new Date(1e3*a);return`${b.getHours()}:${b.getMinutes()} ${b.getDate()}.${b.getMonth()+1}.${b.getFullYear()}`},t=a=>{switch(a){case l.OrderStatus.pending:return"pending";case l.OrderStatus.paid:return"success";case l.OrderStatus.shipping:return"info";case l.OrderStatus.delivered:return"success";case l.OrderStatus.canceled:return"error";default:return"pending"}};return b?(0,d.jsx)("div",{children:"Loading..."}):c?(0,d.jsx)("div",{children:"Error loading orders"}):a&&0!==a.length?(0,d.jsxs)(g.List,{className:n.default.list,gridTemplateColumns:"100px 1fr 150px 150px 150px 150px",children:[(0,d.jsxs)(h.ListRowHeader,{children:[(0,d.jsx)(i.ListCell,{children:"#"}),(0,d.jsx)(i.ListCell,{children:"Date"}),(0,d.jsx)(i.ListCell,{children:"Total Price"}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:"Author"}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:"Status"}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:"Action"})]}),a.map(a=>(0,d.jsxs)(k.ExpandableRow,{padding:"5px 0",content:(0,d.jsxs)(g.List,{gridTemplateColumns:"50px 3fr 100px 100px",children:[(0,d.jsxs)(h.ListRowHeader,{children:[(0,d.jsx)(i.ListCell,{children:"#"}),(0,d.jsx)(i.ListCell,{children:"Product"}),(0,d.jsx)(i.ListCell,{children:"Price"}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:"Quantity"})]}),a.items.map(a=>(0,d.jsxs)(h.default,{children:[(0,d.jsxs)(i.ListCell,{children:["#",a.product_id]}),(0,d.jsx)(i.ListCell,{children:a.name}),(0,d.jsxs)(i.ListCell,{children:[a.price," zł"]}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:a.quantity})]},a.order_item_id))]}),children:[(0,d.jsxs)(i.ListCell,{children:["#",a.order_id]}),(0,d.jsx)(i.ListCell,{children:s(a.created_at)}),(0,d.jsxs)(i.ListCell,{children:[a.total_price," zł"]}),(0,d.jsxs)(i.ListCell,{centerHorizontal:!0,children:[a.first_name," ",a.last_name]}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:(0,d.jsx)(j.default,{variant:t(a.status),children:a.status})}),(0,d.jsx)(i.ListCell,{centerHorizontal:!0,children:a.status!==l.OrderStatus.canceled&&(0,d.jsx)(o.ManagerButton,{onClick:()=>r(a.order_id),disabled:p.has(a.order_id),children:p.has(a.order_id)?"Cancelling...":"Cancel Order"})})]},a.order_id))]}):(0,d.jsx)("div",{children:"No orders found"})}}}};

//# sourceMappingURL=%5Broot-of-the-server%5D__6bef723b._.js.map