{"version":3,"sources":["turbopack:///[project]/components/Loading/Loading.module.css [app-ssr] (css module)","turbopack:///[project]/components/Loading/Loading.tsx","turbopack:///[project]/components/Api/RequireAuth.tsx","turbopack:///[next]/internal/font/google/poppins_9ac3ec3.module.css [app-ssr] (css module)","turbopack:///[next]/internal/font/google/poppins_9ac3ec3.js","turbopack:///[next]/internal/font/google/roboto_d5b2c989.module.css [app-ssr] (css module)","turbopack:///[next]/internal/font/google/roboto_d5b2c989.js","turbopack:///[project]/node_modules/next/navigation.js","turbopack:///[project]/hooks/useUser.ts","turbopack:///[project]/components/Form/Input.module.css [app-ssr] (css module)","turbopack:///[project]/components/Form/Input.tsx","turbopack:///[project]/components/Form/AuthForm.module.css [app-ssr] (css module)","turbopack:///[project]/components/Form/AuthForm.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"container\": \"Loading-module__5VDP-q__container\",\n  \"pulse\": \"Loading-module__5VDP-q__pulse\",\n});\n","import css from \"./Loading.module.css\";\nimport React from \"react\";\n\nexport function Loading(props: {\n    children?: React.ReactNode;\n}) {\n    return (\n        <span className={css.container}>{props.children}</span>\n    );\n}","\"use client\";\n\nimport {useRouter} from \"next/navigation\";\nimport useUser from \"@/hooks/useUser\";\n\nexport const RequireAuth = (props: {\n    href?: string | \"back\",\n    type: \"admin\" | \"loggedIn\" | \"loggedOut\",\n}) => {\n    const router = useRouter();\n    const {isLoggedIn, user, error, isLoading} = useUser();\n    if (isLoading) return (<></>);\n\n    const route = () => {\n        console.error(\"RequireAuth: \", \"redirecting to '\", props.href || \"/\", \"'\")\n        if (props.href === \"back\") router.back();\n        router.push(props.href || \"/\");\n    }\n\n    if (props.type === \"loggedIn\" && !isLoggedIn) {\n        route();\n    } else if (props.type === \"admin\" && (!isLoggedIn || user.permission === 0)) {\n        route();\n    } else if (props.type === \"loggedOut\" && isLoggedIn) {\n        route();\n    }\n\n    return (<></>);\n};","__turbopack_context__.v({\n  \"className\": \"poppins_9ac3ec3-module__ogIsha__className\",\n});\n","import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22font.ts%22,%22import%22:%22Poppins%22,%22arguments%22:[{%22weight%22:[%22200%22,%22300%22,%22400%22,%22500%22,%22600%22,%22700%22,%22800%22,%22900%22],%22subsets%22:[%22latin%22],%22fallback%22:[%22sans-serif%22]}],%22variableName%22:%22poppins%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Poppins', sans-serif\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n","__turbopack_context__.v({\n  \"className\": \"roboto_d5b2c989-module__7PeVaG__className\",\n});\n","import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22font.ts%22,%22import%22:%22Roboto%22,%22arguments%22:[{%22weight%22:[%22100%22,%22300%22,%22400%22,%22500%22,%22700%22,%22900%22],%22subsets%22:[%22latin%22],%22fallback%22:[%22sans-serif%22]}],%22variableName%22:%22roboto%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Roboto', sans-serif\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n","module.exports = require('./dist/client/components/navigation')\n","import useSWR from \"swr\";\nimport {OutPacket} from \"@/utils/OutPacket\";\nimport {JsonError} from \"@/utils/api\";\nimport {IUser} from \"@/utils/User\";\n\nexport default function useUser() {\n    const {data, error, isLoading} = useSWR(\"/user/index.php\", {\n        shouldRetryOnError: false,\n    })\n\n    let isLoggedIn = true;\n\n    if (error) {\n        isLoggedIn = false;\n        console.log(\"useUser: \", JSON.stringify(error))\n    }\n\n    return {\n        isLoading,\n        isLoggedIn,\n        data: data as OutPacket<IUser>,\n        user: data?.d as IUser,\n        error: error as JsonError,\n    }\n}\n","__turbopack_context__.v({\n  \"container\": \"Input-module__tSvyFa__container\",\n});\n","\"use client\"\nimport css from \"./Input.module.css\"\nimport {ChangeEventHandler, HTMLInputTypeAttribute, useState} from \"react\";\n\nexport function Input(props: {\n    type?: HTMLInputTypeAttribute,\n    placeholder?: string,\n    value?: string,\n    onChange?: ChangeEventHandler<HTMLInputElement>,\n    name?: string\n}) {\n    const [value, setValue] = useState(props.value || \"\");\n\n    const onChange: ChangeEventHandler<HTMLInputElement> = (event) => {\n        if (props.onChange != undefined)\n            props.onChange(event);\n        else setValue(event.target.value);\n    }\n\n    return (\n        <div className={css.container}>\n            <input name={props.name || undefined}\n                   onChange={onChange}\n                   value={props.value || value}\n                   type={props.type || \"text\"}\n                   placeholder={props.placeholder || undefined}\n            />\n        </div>\n    );\n}","__turbopack_context__.v({\n  \"error\": \"AuthForm-module__RzedZa__error\",\n  \"formBody\": \"AuthForm-module__RzedZa__formBody\",\n  \"formContent\": \"AuthForm-module__RzedZa__formContent\",\n  \"formTitle\": \"AuthForm-module__RzedZa__formTitle\",\n  \"modeChanger\": \"AuthForm-module__RzedZa__modeChanger\",\n  \"submit\": \"AuthForm-module__RzedZa__submit\",\n});\n","\"use client\"\nimport css from \"./AuthForm.module.css\"\nimport {poppins, roboto} from \"@/utils/font\";\nimport {Input} from \"@/components/Form/Input\";\nimport {FormEventHandler, Fragment, useState} from \"react\";\nimport {API_HOSTNAME} from \"@/utils/api\";\nimport {OutPacket} from \"@/utils/OutPacket\";\nimport {Loading} from \"@/components/Loading/Loading\";\nimport {useRouter} from \"next/navigation\";\nimport {mutate} from \"swr\";\n\n\nexport function AuthForm() {\n    const [isLogin, setIsLogin] = useState<boolean>(true);\n    const [isLoading, setIsLoading] = useState(false);\n    const [error, setError] = useState<string | null>(null);\n    const router = useRouter();\n\n    const Submit: FormEventHandler<HTMLFormElement> = async (event) => {\n        event.preventDefault();\n        setIsLoading(true);\n        const data = new FormData(event.target as HTMLFormElement);\n\n        let href = API_HOSTNAME + ((isLogin) ? \"login.php\" : \"register.php\");\n\n        const res = await fetch(href, {\n            method: \"POST\",\n            credentials: \"include\",\n            body: data,\n        })\n\n        if (!res.ok) {\n            let err = \"error\";\n\n            try {\n                const json: OutPacket = await res.json();\n                err = json.d;\n            } catch (err) {\n                console.error(err)\n            }\n\n            console.error(`AuthForm FAILED: ${err}`);\n            setError(err + ` (${res.status})`);\n            setIsLoading(false);\n            return;\n        }\n\n        const json: OutPacket = await res.json();\n\n        if (json.c == 0) {\n            console.log(`AuthForm SUCCESS: ${json.d.login}`);\n            await mutate(\"/user/index.php\");\n            router.push(\"/\");\n        } else {\n            console.error(`AuthForm FAILED: ${json}`);\n            setError(json.d + ` (${res.status})`)\n        }\n\n        setIsLoading(false);\n    }\n\n    return (\n        <div className={css.container}>\n            <div className={css.formBody}>\n                {(isLoading) ? (<>\n                    <Loading/>\n                </>) : (<>\n                    <div style={poppins.style} className={css.formTitle}>\n                        {(isLogin) ? \"Zaloguj\" : \"Zarejestruj\"}\n                    </div>\n                    <form onSubmit={Submit} style={roboto.style} className={css.formContent}>\n                        {(isLogin) ? (<LoginFormProps/>) : (<RegisterFormProps/>)}\n\n                        <div className={css.error}>\n                            {(error) ? error : undefined}\n                        </div>\n                        <div className={css.submit}>\n                            <input type=\"submit\" value={(isLogin) ? \"Zaloguj\" : \"Zarejestruj\"}/>\n                        </div>\n                    </form>\n                    <div style={poppins.style} className={css.modeChanger}>\n                        {\n                            (isLogin) ? \"Nie masz konta?\" : \"Masz już konto?\"\n                        }\n                        <span onClick={() => {\n                            setIsLogin(!isLogin);\n                            setError(null);\n                        }}>{\n                            (isLogin) ? \"Zarejestruj\" : \"Zaloguj\"\n                        } się!</span>\n                    </div>\n                </>)}\n\n            </div>\n        </div>\n    );\n}\n\nfunction LoginFormProps() {\n    return (\n        <>\n            <div>Login</div>\n            <div><Input name={\"login\"} type={\"text\"} placeholder={\"John@example.com\"}></Input></div>\n            <div>Password</div>\n            <div><Input name={'password'} type={\"password\"} placeholder={\"Your pasword\"}></Input></div>\n        </>\n    );\n}\n\nfunction RegisterFormProps() {\n    return (<>\n        <LoginFormProps/>\n        <div>First Name</div>\n        <div><Input name={\"first_name\"} type={\"text\"} placeholder={\"John\"}/></div>\n        <div>Last Name</div>\n        <div><Input name={\"last_name\"} type={\"text\"} placeholder={\"Smith\"}/></div>\n    </>);\n}"],"names":[],"mappings":"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","ignoreList":[3,4,5,6,7]}