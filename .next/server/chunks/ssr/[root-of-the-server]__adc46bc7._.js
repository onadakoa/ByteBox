module.exports={80278:a=>{var{g:b,__dirname:c}=a;a.v({className:"poppins_9ac3ec3-module__ogIsha__className"})},79916:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(80278);let b={className:d.default.className,style:{fontFamily:"'Poppins', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},51480:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_d5b2c989-module__7PeVaG__className"})},87570:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(51480);let b={className:d.default.className,style:{fontFamily:"'Roboto', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},68953:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570)},20736:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570),a.i(68953)},25098:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({poppins:()=>d.default});var d=a.i(79916)},53235:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({mutate:()=>d.j});var d=a.i(80661)},717:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Category:()=>b});var d=a.i(38072);class b{alias=[];id=0;name="";fill(a){Object.assign(this,a)}static getFilled(a){let c=new b;return c.fill(a),c}static async getById(a){let c=await fetch("/api/categories/index.php?id="+a),e=null;try{e=await c.json()}catch(a){console.error(`Category ERROR: ${a}`)}if(!c.ok)throw console.error(`Category ERROR: ${e}`),new d.JsonError(c.status,e);return b.getFilled(e?.d)}}}},97731:a=>{var{g:b,__dirname:c}=a;a.v({container:"Card-module__pmewmq__container"})},78858:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({Card:()=>f});var d=a.i(74420),e=a.i(97731);function f(a){let b={padding:a.padding};return(0,d.jsx)("div",{className:e.default.container,style:b,children:a.children})}},80551:a=>{var{g:b,__dirname:c}=a;a.v({addAliasContainer:"CategoryEditor-module__xhfZ3G__addAliasContainer",addButton:"CategoryEditor-module__xhfZ3G__addButton",aliasItem:"CategoryEditor-module__xhfZ3G__aliasItem",aliasList:"CategoryEditor-module__xhfZ3G__aliasList",container:"CategoryEditor-module__xhfZ3G__container",emptyMessage:"CategoryEditor-module__xhfZ3G__emptyMessage",form:"CategoryEditor-module__xhfZ3G__form",formGroup:"CategoryEditor-module__xhfZ3G__formGroup",input:"CategoryEditor-module__xhfZ3G__input",label:"CategoryEditor-module__xhfZ3G__label",message:"CategoryEditor-module__xhfZ3G__message",removeButton:"CategoryEditor-module__xhfZ3G__removeButton",submitButton:"CategoryEditor-module__xhfZ3G__submitButton",title:"CategoryEditor-module__xhfZ3G__title"})},90994:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>l});var d=a.i(74420),e=a.i(22851),f=a.i(78858);a.i(20736);var g=a.i(25098),h=a.i(80551),i=a.i(717),j=a.i(18656),k=a.i(53235);function l(){let a=(0,j.useSearchParams)().get("id"),[b,c]=(0,e.useState)(a?"edit":"create"),[l,m]=(0,e.useState)(""),[n,o]=(0,e.useState)([]),[p,q]=(0,e.useState)(""),[r,s]=(0,e.useState)(!1),[t,u]=(0,e.useState)("");(0,e.useEffect)(()=>{"edit"===b&&a&&(async()=>{s(!0);try{let b=await i.Category.getById(parseInt(a));m(b.name),o(b.alias||[])}catch(a){console.error("Error fetching category:",a),u(`Error: ${a instanceof Error?a.message:"Unknown error"}`)}finally{s(!1)}})()},[b,a]);let v=async a=>{(await fetch("/api/categories/alias.php?id="+a,{credentials:"include",method:"DELETE"})).ok||u("Failed to delete alias"),o(n.filter(b=>b.alias_id!==a)),u(`Alias ${a} deleted successfully!`)},w=async c=>{c.preventDefault(),s(!0),u("");try{let c=new FormData;c.append("name",l);let d={name:l,id:a?parseInt(a):void 0},e=await fetch("/api/categories/index.php",{method:"create"===b?"POST":"PUT",credentials:"include",body:"create"===b?c:JSON.stringify(d)});if(!e.ok)throw Error("Failed to save category");let f=await e.json(),g="create"===b?f.d.id:parseInt(a);for(let a of n)a.alias_id<0?await fetch("/api/categories/alias.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({alias:a.name,category_id:g.toString()})}):"edit"===b&&await fetch("/api/categories/alias.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.alias_id,alias:a.name,category_id:g})});u(`Category ${"create"===b?"created":"updated"} successfully!`),"create"===b&&(m(""),o([])),await (0,k.mutate)("/categories/index.php")}catch(a){console.error(`Error ${"create"===b?"creating":"updating"} category:`,a),u(`Error: ${a instanceof Error?a.message:"Unknown error"}`)}finally{s(!1)}};return(0,d.jsxs)("div",{className:[g.poppins.className,h.default.container].join(" "),children:[(0,d.jsx)("h1",{className:h.default.title,children:"create"===b?"Create New Category":"Edit Category"}),(0,d.jsx)(f.Card,{children:(0,d.jsxs)("form",{onSubmit:w,className:h.default.form,children:[(0,d.jsxs)("div",{className:h.default.formGroup,children:[(0,d.jsx)("label",{htmlFor:"name",className:h.default.label,children:"Category Name"}),(0,d.jsx)("input",{id:"name",type:"text",value:l,onChange:a=>m(a.target.value),required:!0,className:h.default.input})]}),(0,d.jsxs)("div",{className:h.default.formGroup,children:[(0,d.jsx)("label",{className:h.default.label,children:"Aliases"}),(0,d.jsx)("div",{className:h.default.aliasList,children:n.length>0?n.map(a=>(0,d.jsxs)("div",{className:h.default.aliasItem,children:[(0,d.jsx)("span",{children:a.name}),(0,d.jsx)("button",{type:"button",onClick:()=>v(a.alias_id),className:h.default.removeButton,children:"Remove"})]},a.alias_id)):(0,d.jsx)("div",{className:h.default.emptyMessage,children:"No aliases added"})}),(0,d.jsxs)("div",{className:h.default.addAliasContainer,children:[(0,d.jsx)("input",{type:"text",value:p,onChange:a=>q(a.target.value),placeholder:"Enter new alias",className:h.default.input}),(0,d.jsx)("button",{type:"button",onClick:()=>{p.trim()&&(o([...n,{alias_id:-Date.now(),name:p.trim()}]),q(""))},className:h.default.addButton,children:"Add Alias"})]})]}),(0,d.jsx)("div",{className:h.default.formGroup,children:(0,d.jsx)("button",{type:"submit",className:h.default.submitButton,disabled:r,children:r?"Saving...":"Save Category"})}),t&&(0,d.jsx)("div",{className:h.default.message,children:t})]})})]})}},94699:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>g});var d=a.i(74420),e=a.i(22851),f=a.i(90994);function g(){return(0,d.jsx)("div",{children:(0,d.jsx)(e.Suspense,{children:(0,d.jsx)(f.default,{})})})}}};

//# sourceMappingURL=%5Broot-of-the-server%5D__adc46bc7._.js.map