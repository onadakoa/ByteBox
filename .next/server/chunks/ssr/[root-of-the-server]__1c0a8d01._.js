module.exports={77403:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({RequireAuth:()=>b});var d=a.i(74420),e=a.i(18656),f=a.i(81658);let b=a=>{let b=(0,e.useRouter)(),{isLoggedIn:c,user:g,error:h,isLoading:i}=(0,f.default)();if(i)return(0,d.jsx)(d.Fragment,{});let j=()=>{console.error("RequireAuth: ","redirecting to '",a.href||"/","'"),"back"===a.href&&b.back(),b.push(a.href||"/")};return("loggedIn"!==a.type||c)&&("admin"!==a.type||c&&0!==g.permission)?"loggedOut"===a.type&&c&&j():j(),(0,d.jsx)(d.Fragment,{})}}},80278:a=>{var{g:b,__dirname:c}=a;a.v({className:"poppins_9ac3ec3-module__ogIsha__className"})},79916:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(80278);let b={className:d.default.className,style:{fontFamily:"'Poppins', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},51480:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_d5b2c989-module__7PeVaG__className"})},87570:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(51480);let b={className:d.default.className,style:{fontFamily:"'Roboto', sans-serif",fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},68953:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570)},20736:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({}),a.i(79916),a.i(87570),a.i(68953)},25098:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({poppins:()=>d.default});var d=a.i(79916)},53235:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({mutate:()=>d.j});var d=a.i(80661)},18656:function(a){var{g:b,__dirname:c,m:d,e:e}=a;d.exports=a.r(93433)},81658:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>e});var d=a.i(26420);function e(){let{data:a,error:b,isLoading:c}=(0,d.default)("/user/index.php",{shouldRetryOnError:!1}),e=!0;return b&&(e=!1,console.log("useUser: ",JSON.stringify(b))),{isLoading:c,isLoggedIn:e,data:a,user:a?.d,error:b}}},64835:a=>{var{g:b,__dirname:c}=a;a.v({container:"Input-module__tSvyFa__container"})},9904:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({Input:()=>g});var d=a.i(74420),e=a.i(64835),f=a.i(22851);function g(a){let[b,c]=(0,f.useState)(a.value||"");return(0,d.jsx)("div",{className:e.default.container,children:(0,d.jsx)("input",{name:a.name||void 0,onChange:b=>{void 0!=a.onChange?a.onChange(b):c(b.target.value)},value:a.value||b,type:a.type||"text",placeholder:a.placeholder||void 0})})}},48521:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({roboto:()=>d.default});var d=a.i(87570)},13275:a=>{var{g:b,__dirname:c}=a;a.v({container:"Button-module__8cr-Ka__container"})},39922:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_498287c9-module__wIVGaW__className"})},18684:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(39922);let b={className:d.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:400,fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},57391:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>g});var d=a.i(74420),e=a.i(13275),f=a.i(18684);function g(a){let b={"--Color":a.color||"white","--BColor":a.backgroundColor||"var(--green-color)"};return(0,d.jsx)("div",{style:b,className:[f.default.className,e.default.container].join(" "),onClick:a.onClick,children:a.children})}},42407:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>e});var d=a.i(74420);function e(a){let b={fontSize:a.fontSize,fontVariationSettings:`
        'FILL' ${Number(a.FILL||!1)},
        'wght' ${a.wght||400},
        'GRAD' ${a.GRAD||0},
        'opsz' ${a.opsz||24} 
        `};return(0,d.jsx)("span",{className:`material-symbols-${a.type||"outlined"}`,style:b,children:a.children})}},68916:a=>{var{g:b,__dirname:c}=a;a.v({container:"Table-module__P1YERa__container"})},67305:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Table:()=>b});var d=a.i(74420),e=a.i(68916);let b=a=>(0,d.jsx)("div",{className:e.default.container,style:{rowGap:a.rowGap,columnGap:a.columnGap},children:a.children})}},67311:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({TableField:()=>e});var d=a.i(74420);function e(a){return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("div",{children:a.value}),(0,d.jsx)("div",{children:a.children})]})}},56881:a=>{var{g:b,__dirname:c}=a;a.v({addEntry:"BillingAddress-module__9nUpIG__addEntry",container:"BillingAddress-module__9nUpIG__container",entry:"BillingAddress-module__9nUpIG__entry",entryAction:"BillingAddress-module__9nUpIG__entryAction"})},64658:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({useAddress:()=>e});var d=a.i(26420);function e(){let{data:a,isLoading:b,error:c}=(0,d.default)("/shipping_address/index.php");return{isLoading:b,error:c,data:a,addresses:a?.d}}},22408:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({BillingAddressManager:()=>n});var d=a.i(74420),e=a.i(56881);a.i(20736);var f=a.i(48521),g=a.i(42407),h=a.i(22851),i=a.i(67305),j=a.i(67311),k=a.i(9904),l=a.i(64658),m=a.i(53235);function n(a){let[b,c]=(0,h.useState)(null),[[g,i],j]=(0,h.useState)(["view",0]),{addresses:k,isLoading:m,error:n}=(0,l.useAddress)(),r=b=>{c(b),a.onSelect&&a.onSelect(b)};return(0,d.jsxs)("div",{style:f.roboto.style,className:e.default.container,children:["view"===g||(0,d.jsx)(q,{mode:g,id:i,setMode:j}),(0,d.jsx)(()=>{if(!m&&"view"===g&&!n)return k?.map(c=>{let e=[`${c.first_name} ${c.last_name},`,`${c.phone_number},`,`${c.city}, ${c.postal_code},`,`${c.street}, ${c.building_number}, ${c.apartment_number||""}`];return(0,d.jsx)(o,{id:c.shipping_address_id,values:e,selected:c.shipping_address_id===b,showActions:!a.DontShowActions,onSelect:a.DontSelect?void 0:()=>r(c.shipping_address_id),setMode:j},c.shipping_address_id)})},{}),"view"!=g||(a.DontRenderAddEntry?null:(0,d.jsx)(p,{setMode:j}))]})}function o(a){let b={borderColor:a.selected?"black":void 0},c=async()=>{let b=await fetch(`/api/shipping_address/index.php?id=${a.id}`,{method:"DELETE",credentials:"include"});if(!b.ok){console.error("BillingAddressManager: ",`failed to fetch, C: ${b.status}`),console.error("BillingAddressManager: ",await b.json());return}await (0,m.mutate)("/shipping_address/index.php")};return(0,d.jsxs)("div",{className:e.default.entry,style:b,onClick:a.onSelect,children:[(0,d.jsx)("div",{children:a.values.map((a,b)=>(0,d.jsx)("span",{children:a},b))}),a.showActions?(0,d.jsxs)("div",{className:e.default.entryAction,children:[(0,d.jsx)("span",{onClick:()=>{a.setMode(["edit",a.id])},children:"Edit"}),(0,d.jsx)("span",{onClick:c,children:"Delete"})]}):null]})}function p({setMode:a}){return(0,d.jsx)("div",{className:[e.default.entry,e.default.addEntry].join(" "),onClick:()=>{a(["create",0])},children:(0,d.jsx)(g.default,{wght:500,GRAD:200,fontSize:"2rem",children:"add"})})}function q(a){let[b,c]=(0,h.useState)("edit"===a.mode),[f,g]=(0,h.useState)(null),[l,n]=(0,h.useState)({first_name:"",last_name:"",phone_number:"",postal_code:"",city:"",street:"",building_number:"",apartment_number:""});(0,h.useEffect)(()=>{(async()=>{if("edit"!==a.mode)return;let b=await fetch(`/api/shipping_address/id.php?id=${a.id||0}`,{method:"GET",credentials:"include"});if(!b.ok){console.error("BillingAddressManager: ",`failed to fetch, C: ${b.status}`);let a=await b.json();console.error("BillingAddressManager: ",a),p(a?.d);return}n((await b.json()).d),c(!1)})()},[]);let o=a=>{console.log("now");let{name:b,value:c}=a.target;if("phone_number"===b){let a=c.replace(/[^0-9]/g,"");a=((a=a.slice(0,9)).match(/.{1,3}/g)??[]).join("-"),n({...l,[b]:a})}else if("postal_code"===b){let a=c.replace(/[^0-9]/g,"");(a=a.slice(0,5)).length>2&&(a=a.slice(0,2)+"-"+a.slice(2)),n({...l,[b]:a})}else if(["apartment_number","building_number"].includes(b)){let a=c.replace(/[^0-9]/g,"");n({...l,[b]:a})}else n({...l,[b]:c})},p=a=>{g(a)},q=async b=>{b.preventDefault(),c(!0);let d=new FormData(b.currentTarget);"edit"===a.mode&&d.append("id",a.id.toString());let e=Object.fromEntries(d.entries()),f=await fetch("/api/shipping_address/index.php",{method:"create"===a.mode?"POST":"PUT",credentials:"include",body:"create"===a.mode?d:JSON.stringify(e)});if(!f.ok){if(console.error("BillingAddressManager: ",`failed to fetch, C: ${f.status}`),404==f.status)p("not found");else{let a=await f.json();console.error("BillingAddressManager: ",a),p(`error: ${f.status}, ${a?.d}`)}return}console.log("BillingAddressManager: ",await f.json()),await (0,m.mutate)("/shipping_address/index.php"),c(!1),a.setMode(["view",0])};return b?(0,d.jsx)("span",{children:"Loading"}):(0,d.jsxs)("form",{onSubmit:q,children:[(0,d.jsx)("div",{children:(0,d.jsxs)(i.Table,{children:[(0,d.jsx)(j.TableField,{value:"First name",children:(0,d.jsx)(k.Input,{name:"first_name",placeholder:"John",value:l.first_name,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Last name",children:(0,d.jsx)(k.Input,{name:"last_name",placeholder:"Smith",value:l.last_name,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Phone number",children:(0,d.jsx)(k.Input,{type:"tel",name:"phone_number",placeholder:"000-000-000",value:l.phone_number,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Postal code",children:(0,d.jsx)(k.Input,{name:"postal_code",placeholder:"34-600",value:l.postal_code,onChange:o})}),(0,d.jsx)(j.TableField,{value:"City",children:(0,d.jsx)(k.Input,{name:"city",placeholder:"Warszawa",value:l.city,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Street name",children:(0,d.jsx)(k.Input,{name:"street",placeholder:"ul. Limonkowa",value:l.street,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Building number",children:(0,d.jsx)(k.Input,{name:"building_number",placeholder:"155",value:l.building_number,onChange:o})}),(0,d.jsx)(j.TableField,{value:"Apartment number",children:(0,d.jsx)(k.Input,{name:"apartment_number",placeholder:"3",value:l.apartment_number,onChange:o})})]})}),(0,d.jsxs)("div",{className:e.default.entryAction,children:[(0,d.jsx)("input",{type:"submit",value:"Save"}),(0,d.jsx)("span",{onClick:()=>{a.setMode(["view",0])},children:"Cancel"}),(0,d.jsx)("span",{className:e.default.error,children:f})]})]})}},259:a=>{var{g:b,__dirname:c}=a;a.v({container:"Header-module__arFiJq__container"})},14983:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Header:()=>b});var d=a.i(74420),e=a.i(259);a.i(20736);var f=a.i(25098);let b=a=>{let b={...f.poppins.style,padding:a.padding,fontSize:a.size,fontWeight:a.weight};return(0,d.jsx)("div",{className:e.default.container,style:b,children:a.children})}}}};

//# sourceMappingURL=%5Broot-of-the-server%5D__1c0a8d01._.js.map