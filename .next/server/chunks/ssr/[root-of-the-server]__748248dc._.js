module.exports={63156:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Product:()=>b});var d=a.i(717),e=a.i(33459);class b{product_id=0;attachment_id=null;category_id=null;author_id=0;name="";description="";price=0;stock=0;fill(a){Object.assign(this,a)}static getFilled(a){let c=new b;return c.fill(a),c}getCategory(){return this.category_id?d.Category.getById(this.category_id):null}fetchAttachment(){return this.attachment_id?e.Attachment.fetchById(this.attachment_id):null}}}},717:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Category:()=>b});var d=a.i(38072);class b{alias=[];id=0;name="";fill(a){Object.assign(this,a)}static getFilled(a){let c=new b;return c.fill(a),c}static async getById(a){let c=await fetch("/api/categories/index.php?id="+a),e=null;try{e=await c.json()}catch(a){console.error(`Category ERROR: ${a}`)}if(!c.ok)throw console.error(`Category ERROR: ${e}`),new d.JsonError(c.status,e);return b.getFilled(e?.d)}}}},91655:function(a){var{g:b,__dirname:c,m:d,e:e}=a;{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f={default:function(){return j},getImageProps:function(){return h}};for(var g in f)Object.defineProperty(e,g,{enumerable:!0,get:f[g]});let b=a.r(95658),c=a.r(20835),d=a.r(99705),i=b._(a.r(27073));function h(a){let{props:b}=(0,c.getImgProps)(a,{defaultLoader:i.default,imgConf:JSON.parse('{"deviceSizes":[640,750,828,1080,1200,1920,2048,3840],"imageSizes":[16,32,48,64,96,128,256,384],"path":"/_next/image","loader":"default","dangerouslyAllowSVG":false,"unoptimized":true}')});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let j=d.Image}},65171:function(a){var{g:b,__dirname:c,m:d,e:e}=a;d.exports=a.r(91655)},33459:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ApiImage:()=>c,Attachment:()=>b});var d=a.i(38072);class b{attachment_id=0;author_id=0;creation_date=0;images=[];fill(a){Object.assign(this,a)}getImages(){return this.images.map(a=>c.getFilled(a))}static getFilled(a){let c=new b;return c.fill(a),c}static async fetchById(a){try{let c=await fetch("/api/attachments/index.php?id="+a),e=await c.json();if(!c.ok)throw new d.JsonError(c.status,e);return b.getFilled(e?.d)}catch(a){throw console.error(`Attachment ERROR: ${a}`),a}}}class c{id=0;size=0;type="";fill(a){Object.assign(this,a)}static getFilled(a){let b=new c;return b.fill(a),b}getURL(){return"/api/attachments/image.php?id="+this.id}}}},22794:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>e});var d=a.i(26420);function e(a={}){let b=new URLSearchParams;a.search&&b.append("search",a.search),a.limit&&b.append("limit",a.limit.toString()),a.page&&b.append("page",a.page.toString()),a.category&&b.append("category",a.category.toString()),a.price_in&&b.append("price_in",a.price_in.toString()),a.price_out&&b.append("price_out",a.price_out.toString()),a.sort&&b.append("sort",a.sort);let{data:c,isLoading:f,error:g,mutate:h}=(0,d.default)(`/products/index.php?${b.toString()}`);return{isLoading:f,error:g,data:c,products:c?.d,mutate:h}}},84371:a=>{var{g:b,__dirname:c}=a;a.v({container:"FilterBox-module__aWyjuG__container"})},92658:a=>{var{g:b,__dirname:c}=a;a.v({className:"poppins_ee298dbb-module__VNHDZq__className"})},78924:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(92658);let b={className:d.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontWeight:400,fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},62957:a=>{var{g:b,__dirname:c}=a;a.v({container:"FilterBoxItem-module__F9noWW__container"})},88666:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>f});var d=a.i(74420),e=a.i(62957);function f(a){return(0,d.jsxs)("div",{className:e.default.container,children:[(0,d.jsx)("span",{children:a.title}),(0,d.jsx)("div",{children:a.children})]})}},65621:a=>{var{g:b,__dirname:c}=a;a.v({container:"FilterBoxSelect-module__vqSVga__container"})},30922:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>f});var d=a.i(74420),e=a.i(65621);function f(a){return(0,d.jsx)("select",{className:e.default.container,value:a.value,onChange:b=>{a.onChange(b.target.value)},children:a.options.map((a,b)=>(0,d.jsx)("option",{value:a.value,children:a.span||a.value},a.value))})}},7443:a=>{var{g:b,__dirname:c}=a;a.v({container:"FilterBoxPrice-module__CDi7cq__container",priceInput:"FilterBoxPrice-module__CDi7cq__priceInput",spacer:"FilterBoxPrice-module__CDi7cq__spacer"})},37845:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_ee0f352c-module__sR2SPa__className"})},38655:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(37845);let b={className:d.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:100,fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},11696:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>h});var d=a.i(74420),e=a.i(22851),f=a.i(7443),g=a.i(38655);function h(a){let b=(0,e.useRef)(null),c=(0,e.useRef)(null),h=()=>{a.onChange(b.current?.value||"",c.current?.value||"")};return(0,d.jsxs)("div",{className:f.default.container,children:[(0,d.jsxs)("label",{className:[g.default.className,f.default.priceInput].join(" "),children:[(0,d.jsx)("input",{type:"number",placeholder:"0",value:a.min,ref:b,onChange:()=>{h()}}),(0,d.jsx)("span",{children:"zł"})]}),(0,d.jsx)("div",{className:f.default.spacer}),(0,d.jsxs)("label",{className:[g.default.className,f.default.priceInput].join(" "),children:[(0,d.jsx)("input",{type:"number",placeholder:"0",value:a.max,ref:c,onChange:()=>{h()}}),(0,d.jsx)("span",{children:"zł"})]})]})}},21295:a=>{var{g:b,__dirname:c}=a;a.v({container:"FilterBoxSubmit-module__xxaR0a__container"})},56279:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>f});var d=a.i(74420),e=a.i(21295);function f(a){return(0,d.jsx)("div",{className:e.default.container,children:(0,d.jsx)("input",{type:"button",value:a.children,onClick:a.onClick})})}},91384:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>m});var d=a.i(74420),e=a.i(84371),f=a.i(78924),g=a.i(88666),h=a.i(30922),i=a.i(22851),j=a.i(11696),k=a.i(18656),l=a.i(56279);function m(){let a=(0,k.useRouter)(),b=(0,k.useSearchParams)(),[c,m]=(0,i.useState)(b.get("category")||"0"),[n,o]=(0,i.useState)(b.get("sort")||"P_ASC"),[p,q]=(0,i.useState)(b.get("price_in")||""),[r,s]=(0,i.useState)(b.get("price_out")||""),[t,u]=(0,i.useState)(null);return(0,i.useEffect)(()=>{(async()=>{let a=await fetch("/api/categories/index.php",{credentials:"include",method:"GET"});if(!a.ok)return console.error("FilterBox: ",`failed to fetch, ${a}`);let b=await a.json();if(b.c)return console.error("FilterBox: ",b);u([{value:"0",span:"-"},...b.d.map(a=>({value:a.id.toString(),span:a.name}))])})()},[]),(0,d.jsxs)("div",{className:[e.default.container,f.default.className].join(" "),children:[(0,d.jsx)(g.default,{title:"Kategoria",children:(0,d.jsx)(h.default,{options:t||[],value:c,onChange:a=>{if(!t)return;let b=t.find(b=>b.value===a);m(b?.value||"")}})}),(0,d.jsx)(g.default,{title:"Cena (min-max)",children:(0,d.jsx)(j.default,{min:p,max:r,onChange:(a,b)=>{q(a),s(b)}})}),(0,d.jsx)(g.default,{title:"Sortuj",children:(0,d.jsx)(h.default,{options:[{value:"P_ASC",span:"Cena (rosnąco)"},{value:"P_DESC",span:"Cena (malejąco)"}],value:n,onChange:a=>{o(a)}})}),(0,d.jsx)(l.default,{onClick:()=>{let d=new URLSearchParams,e=b.get("search")||"";d.append("search",e),c&&d.append("category",c),d.append("sort",n),d.append("price_in",p),d.append("price_out",r),a.push("/?"+d.toString())},children:"Zastosuj"})]})}},17338:a=>{var{g:b,__dirname:c}=a;a.v({bottom:"Feed-module__fd7aIq__bottom",container:"Feed-module__fd7aIq__container",top:"Feed-module__fd7aIq__top"})},48933:a=>{var{g:b,__dirname:c}=a;a.v({className:"poppins_80241296-module__WqxvLq__className"})},5915:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(48933);let b={className:d.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontWeight:400,fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},83747:a=>{var{g:b,__dirname:c}=a;a.v({className:"roboto_6dad0ff-module__abGRyG__className"})},57402:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({default:()=>c});var d=a.i(83747);let b={className:d.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:700,fontStyle:"normal"}};null!=d.default.variable&&(b.variable=d.default.variable);let c=b}},87435:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>j});var d=a.i(74420),e=a.i(65171),f=a.i(17338),g=a.i(5915),h=a.i(57402),i=a.i(16486);function j(a){return(0,d.jsxs)("div",{className:f.default.container,children:[(0,d.jsx)(i.default,{href:a.productHref||"/",children:(0,d.jsxs)("div",{className:f.default.top,children:[(0,d.jsx)("div",{children:(0,d.jsx)(e.default,{src:a.imageSrc||"https://placehold.co/600x600",alt:"image of product",fill:!0})}),(0,d.jsx)("span",{style:g.default.style,children:a.title})]})}),(0,d.jsx)("div",{className:f.default.bottom,children:(0,d.jsxs)("span",{style:h.default.style,children:[a.price," zł"]})})]})}},8475:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ApiFeed:()=>b,ApiFeedContent:()=>c});var d=a.i(74420),e=a.i(22794),f=a.i(22851),g=a.i(87435),h=a.i(63156),i=a.i(18656);let b=()=>{let a=(0,i.useSearchParams)(),b=a.get("search")||void 0,f=Number(a.get("category"))||void 0,g=a.get("sort")||void 0,j=Number(a.get("price_in"))||void 0,k=Number(a.get("price_out"))||void 0,{products:l,isLoading:m,error:n}=(0,e.default)({search:b,sort:g,category:f,price_in:j,price_out:k});return m||n?"loading":(0,d.jsx)(d.Fragment,{children:l?.map(a=>{let b=h.Product.getFilled(a);return(0,d.jsx)(c,{product:b},b.product_id)})})},c=a=>{let[b,c]=(0,f.useState)(null);return(0,f.useEffect)(()=>{a.product.fetchAttachment()?.then(a=>{c(a)})},[]),(0,d.jsx)(g.default,{price:a.product.price,title:a.product.name,type:a.product.stock>0?"active":"unavailable",imageSrc:b?b.getImages()[0].getURL():void 0,productHref:"/product?id="+a.product.product_id})}}}};

//# sourceMappingURL=%5Broot-of-the-server%5D__748248dc._.js.map