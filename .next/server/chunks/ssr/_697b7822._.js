module.exports={69634:a=>{var{g:b,__dirname:c}=a;a.v({container:"ManagerButton-module__cUw3dG__container"})},96941:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ManagerButton:()=>g});var d=a.i(74420),e=a.i(69634),f=a.i(16486);function g(a){let b={width:a.width,padding:a.padding};return a.href?(0,d.jsx)(f.default,{href:a.href,children:(0,d.jsx)("button",{className:e.default.container,style:b,disabled:a.disabled,children:a.children})}):(0,d.jsx)("button",{onClick:a.onClick,className:e.default.container,style:b,disabled:a.disabled,children:a.children})}},8831:a=>{var{g:b,__dirname:c}=a;a.v({container:"ListRow-module__KhJOla__container",header:"ListRow-module__KhJOla__header"})},42822:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ListContextProvider:()=>f,ListPropertiesContext:()=>b,useListContext:()=>g});var d=a.i(74420),e=a.i(22851);let b=(0,e.createContext)({});function f(a){return(0,d.jsx)(b.Provider,{value:a,children:a.children})}function g(){return(0,e.useContext)(b)}}},94472:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ListRowHeader:()=>h,default:()=>g});var d=a.i(74420),e=a.i(8831),f=a.i(42822);function g(a){let b=(0,f.useListContext)(),c={padding:a.padding,gridTemplateColumns:b.gridTemplateColumns};return(0,d.jsx)("div",{className:[e.default.container,a.className].join(" "),style:c,children:a.children})}function h(a){let b=(0,f.useListContext)(),c={padding:a.padding,gridTemplateColumns:b.gridTemplateColumns};return(0,d.jsx)("div",{className:[e.default.container,e.default.header,a.className].join(" "),style:c,children:a.children})}},27324:a=>{var{g:b,__dirname:c}=a;a.v({container:"ListCell-module__ZsMQza__container"})},59919:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({ListCell:()=>b});var d=a.i(74420),e=a.i(27324);let b=a=>{let b={padding:a.padding,justifyContent:a.centerHorizontal?"center":void 0,textAlign:a.centerHorizontal?"center":void 0};return(0,d.jsx)("div",{className:[e.default.container,a.className].join(" "),style:b,children:a.children})}}},38346:a=>{var{g:b,__dirname:c}=a;a.v({container:"List-module__gn99Za__container"})},64922:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({List:()=>b});var d=a.i(74420),e=a.i(38346);a.i(20736);var f=a.i(25098),g=a.i(42822);let b=a=>{let b={border:a.border};return(0,d.jsx)("div",{className:[f.poppins.className,e.default.container,a.className].join(" "),style:b,children:(0,d.jsx)("div",{children:(0,d.jsx)(g.ListContextProvider,{gridTemplateColumns:a.gridTemplateColumns,children:a.children})})})}}},55466:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({OrderStatus:()=>d});var d=function(a){return a.pending="pending",a.paid="paid",a.shipping="shipping",a.delivered="delivered",a.canceled="canceled",a}({})},35757:a=>{var{g:b,__dirname:c}=a;a.v({container:"Badge-module__6EVb2G__container",default:"Badge-module__6EVb2G__default",error:"Badge-module__6EVb2G__error",info:"Badge-module__6EVb2G__info",pending:"Badge-module__6EVb2G__pending",success:"Badge-module__6EVb2G__success"})},80010:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({default:()=>f});var d=a.i(74420),e=a.i(35757);function f(a){let b={backgroundColor:a.backgroundColor,borderColor:a.borderColor,border:a.border,color:a.color,padding:a.padding};return(0,d.jsx)("div",{className:[e.default.container,a.variant?e.default[a.variant]:void 0,a.className].join(" "),style:b,children:a.children})}},24741:a=>{var{g:b,__dirname:c}=a;a.v({container:"ExpandableRow-module__76n8nG__container",content:"ExpandableRow-module__76n8nG__content",expanded:"ExpandableRow-module__76n8nG__expanded"})},4501:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({ExpandableRow:()=>h});var d=a.i(74420),e=a.i(24741),f=a.i(22851),g=a.i(94472);function h(a){let[b,c]=f.default.useState(!1),h={padding:a.padding},i={paddingLeft:a.indentation?a.indentation:void 0};return(0,d.jsxs)("div",{className:[a.className,e.default.container,b?e.default.expanded:void 0].join(" "),style:h,onClick:()=>{c(!b)},children:[(0,d.jsx)(g.default,{children:a.children}),(0,d.jsx)("div",{className:e.default.content,style:i,children:(0,d.jsx)("div",{onClick:a=>{a.stopPropagation()},style:{backgroundColor:a.backgroundColor},children:a.content})})]})}},17955:a=>{"use strict";var{g:b,__dirname:c}=a;a.s({useDebounce:()=>e});var d=a.i(22851);function e(a,b=2e3){let[c,f]=(0,d.useState)(a);return(0,d.useEffect)(()=>{let c=setTimeout(()=>{f(a)},b);return()=>{clearTimeout(c)}},[a,b]),c}},43978:a=>{var{g:b,__dirname:c}=a;a.v({action:"Manager-module__nhQrBa__action",container:"Manager-module__nhQrBa__container"})},83149:a=>{var{g:b,__dirname:c}=a;a.v({input:"MiniSearchBar-module__SrX-CW__input"})},93244:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({MiniSearchBar:()=>b});var d=a.i(74420),e=a.i(83149);a.i(20736);var f=a.i(25098);let b=a=>(0,d.jsx)("input",{className:[f.poppins.className,e.default.input].join(" "),value:a.value,onChange:a.setValue,type:"text",placeholder:"Search..."})}},35530:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({Manager:()=>b});var d=a.i(74420),e=a.i(43978),f=a.i(93244),g=a.i(64922);let b=a=>(0,d.jsxs)("div",{className:e.default.container,children:[a.dontShowAction?void 0:(0,d.jsxs)("div",{className:e.default.action,style:{gridTemplateColumns:a.actionGridTemplateColumns},children:[(0,d.jsx)("div",{children:(0,d.jsx)(f.MiniSearchBar,{value:a.searchValue,setValue:a.setSearchValue})}),(0,d.jsx)("div",{children:a.additionalSettings}),(0,d.jsx)("div",{children:a.additionalButtons})]}),(0,d.jsx)("div",{className:e.default.table,children:(0,d.jsx)(g.List,{gridTemplateColumns:a.gridTemplateColumns,children:a.children})})]})}},4249:a=>{"use strict";var{g:b,__dirname:c}=a;{a.s({OrdersManager:()=>b});var d=a.i(74420),e=a.i(96941),f=a.i(94472),g=a.i(59919),h=a.i(35530),i=a.i(22851),j=a.i(17955),k=a.i(55466),l=a.i(80010),m=a.i(4501),n=a.i(64922),o=a.i(53235);let b=a=>{let[b,c]=(0,i.useState)(""),[p,q]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[t,u]=(0,i.useState)(null),v=(0,j.useDebounce)(b,500);(0,i.useEffect)(()=>{(async()=>{s(!0);try{let a=await fetch(`/api/order/all.php${v?`?search=${v}`:""}`,{credentials:"include",method:"GET"});if(!a.ok)throw Error("Failed to fetch orders");let b=await a.json();q(b.d||[]),u(null)}catch(a){console.error("Error fetching orders:",a),u(a instanceof Error?a:Error("Unknown error"))}finally{s(!1)}})()},[v]);let w=async(a,b)=>{try{if(!(await fetch("/api/order/index.php",{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({id:a,status:b})})).ok)throw Error("Failed to update order status");return q(p.map(c=>c.order_id===a?{...c,status:b}:c)),(0,o.mutate)("/api/order/index.php"),!0}catch(a){return console.error("Error updating order status:",a),!1}},x=async a=>{try{if(!(await fetch(`/api/order/cancel.php?id=${a}`,{method:"GET",credentials:"include"})).ok)throw Error("Failed to cancel order");return q(p.map(b=>b.order_id===a?{...b,status:k.OrderStatus.canceled}:b)),(0,o.mutate)("/api/order/index.php"),!0}catch(a){return console.error("Error canceling order:",a),!1}},y=a=>{let b=new Date(1e3*a);return`${b.getHours()}:${b.getMinutes()} ${b.getDate()}.${b.getMonth()+1}.${b.getFullYear()}`},z=a=>{switch(a){case k.OrderStatus.pending:return"pending";case k.OrderStatus.paid:return"success";case k.OrderStatus.shipping:return"info";case k.OrderStatus.delivered:return"success";case k.OrderStatus.canceled:return"error";default:return"pending"}};return(0,d.jsxs)(h.Manager,{gridTemplateColumns:"100px 1fr 150px 150px 150px 200px",searchValue:b,setSearchValue:a=>c(a.target.value),dontShowAction:a.dontShowAction,children:[(0,d.jsxs)(f.ListRowHeader,{children:[(0,d.jsx)(g.ListCell,{children:"#"}),(0,d.jsx)(g.ListCell,{children:"Date"}),(0,d.jsx)(g.ListCell,{children:"Total Price"}),(0,d.jsx)(g.ListCell,{children:"Author"}),(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:"Status"}),!a.dontShowItemsAction&&(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:"Action"})]}),r||t?(0,d.jsx)(f.default,{children:(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:r?"Loading...":`Error: ${t?.message}`})}):0===p.length?(0,d.jsx)(f.default,{children:(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:"No orders found"})}):p.map(b=>(0,d.jsxs)(m.ExpandableRow,{padding:"5px 0",content:(0,d.jsxs)(n.List,{gridTemplateColumns:"50px 3fr 100px 100px",children:[(0,d.jsxs)(f.ListRowHeader,{children:[(0,d.jsx)(g.ListCell,{children:"#"}),(0,d.jsx)(g.ListCell,{children:"Product"}),(0,d.jsx)(g.ListCell,{children:"Price"}),(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:"Quantity"})]}),b.items.map(a=>(0,d.jsxs)(f.default,{children:[(0,d.jsxs)(g.ListCell,{children:["#",a.product_id]}),(0,d.jsx)(g.ListCell,{children:a.name}),(0,d.jsxs)(g.ListCell,{children:[a.price," zł"]}),(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:a.quantity})]},a.order_item_id))]}),children:[(0,d.jsxs)(g.ListCell,{children:["#",b.order_id]}),(0,d.jsx)(g.ListCell,{children:y(b.created_at)}),(0,d.jsxs)(g.ListCell,{children:[b.total_price," zł"]}),(0,d.jsxs)(g.ListCell,{children:[b.first_name," ",b.last_name]}),(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:(0,d.jsx)(l.default,{variant:z(b.status),children:b.status})}),!a.dontShowItemsAction&&(0,d.jsx)(g.ListCell,{centerHorizontal:!0,children:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("select",{value:b.status,onChange:a=>w(b.order_id,a.target.value),style:{marginRight:"10px"},children:Object.values(k.OrderStatus).map(a=>(0,d.jsx)("option",{value:a,children:a},a))}),b.status!==k.OrderStatus.canceled&&(0,d.jsx)(e.ManagerButton,{onClick:()=>x(b.order_id),children:"Cancel"})]})})]},b.order_id))]})}}}};

//# sourceMappingURL=_697b7822._.js.map