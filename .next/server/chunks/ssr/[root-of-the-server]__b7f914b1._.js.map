{"version":3,"sources":["turbopack:///[project]/components/Settings/UserSettings.module.css [app-ssr] (css module)","turbopack:///[next]/internal/font/google/roboto_3ccffccb.module.css [app-ssr] (css module)","turbopack:///[next]/internal/font/google/roboto_3ccffccb.js","turbopack:///[project]/components/Button/SubmitButton.tsx","turbopack:///[project]/components/Settings/UserSettings.tsx","turbopack:///[project]/components/Settings/LoginManager.module.css [app-ssr] (css module)","turbopack:///[project]/components/Settings/LoginManager.tsx"],"sourcesContent":["__turbopack_context__.v({\n  \"action\": \"UserSettings-module__8WA2YG__action\",\n  \"container\": \"UserSettings-module__8WA2YG__container\",\n});\n","__turbopack_context__.v({\n  \"className\": \"roboto_3ccffccb-module__kqzFmW__className\",\n});\n","import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22SubmitButton.tsx%22,%22import%22:%22Roboto%22,%22arguments%22:[{%22subsets%22:[%22latin%22],%22weight%22:[%22400%22]}],%22variableName%22:%22roboto%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Roboto', 'Roboto Fallback'\",\n        fontWeight: 400,\nfontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n","import css from \"./Button.module.css\"\nimport {Roboto} from \"next/font/google\";\nimport {CSSProperties} from \"react\";\n\nconst roboto = Roboto({subsets: [\"latin\"], weight: [\"400\"]})\n\nexport default function SubmitButton(props: {\n    children: string,\n    backgroundColor?: string,\n    color?: string,\n    onClick?: () => void,\n}) {\n\n    const style: CSSProperties & { [key: string]: string } = {\n        \"--Color\": (props.color || \"white\"),\n        \"--BColor\": (props.backgroundColor || \"var(--green-color)\"),\n    }\n\n    return (\n        <input type={\"submit\"} style={style} className={[roboto.className, css.container].join(\" \")} onClick={props.onClick} value={props.children}/>)\n}","\"use client\";\nimport css from \"./UserSettings.module.css\";\nimport {Table} from \"@/components/Table/Table\";\nimport {TableField} from \"@/components/Table/TableField\";\nimport {Input} from \"@/components/Form/Input\";\nimport SubmitButton from \"@/components/Button/SubmitButton\";\nimport useUser from \"@/hooks/useUser\";\nimport {FormEventHandler, useEffect, useState} from \"react\";\nimport {JsonError} from \"@/utils/api\";\nimport {mutate} from \"swr\";\n\nexport const UserSettings = () => {\n    const {isLoading, isLoggedIn, user, error} = useUser();\n    const [login, setLogin] = useState(\"\");\n    const [firstname, setFirstname] = useState(\"\");\n    const [lastname, setLastname] = useState(\"\");\n    const [isFetching, setIsFetching] = useState(false);\n\n    useEffect(() => {\n        if (!user) return;\n        setLogin(user.login);\n        setFirstname(user.first_name)\n        setLastname(user.last_name);\n    }, [isLoading]);\n\n    const submit: FormEventHandler<HTMLFormElement> = async (event) => {\n        event.preventDefault();\n        setIsFetching(true);\n        const body = Object.fromEntries(new FormData(event.currentTarget).entries());\n\n        const res = await fetch(\"/api/user/index.php\", {\n            credentials: \"include\",\n            body: JSON.stringify(body),\n            method: \"PUT\"\n        });\n\n        if (!res.ok) {\n            console.error(\"UserSettings: \", `failed to fetch, C: ${res.status}`)\n            if (res.status != 404) {\n                const json = await res.json() as JsonError;\n                console.error(\"UserSettings: \", json)\n            }\n            return;\n        }\n        const json = await res.json();\n        console.log(json);\n        await mutate(\"/user/index.php\");\n        setIsFetching(false);\n    }\n\n    return (\n        <form className={css.container} onSubmit={submit}>\n            <Table>\n                <TableField value={\"Login\"}>\n                    <Input name={\"login\"} placeholder={\"John@example.com\"} value={login}\n                           onChange={(e) => setLogin(e.target.value)}/>\n                </TableField>\n                <TableField value={\"First name\"}>\n                    <Input name={\"first_name\"} placeholder={\"John\"} value={firstname}\n                           onChange={(e) => setFirstname(e.target.value)}/>\n                </TableField>\n                <TableField value={\"Last name\"}>\n                    <Input name={\"last_name\"} placeholder={\"Smith\"} value={lastname}\n                           onChange={(e) => setLastname(e.target.value)}/>\n                </TableField>\n            </Table>\n            <div className={css.action}>\n                <SubmitButton>Save</SubmitButton>\n            </div>\n        </form>\n    );\n};","__turbopack_context__.v({\n  \"container\": \"LoginManager-module__uSBW3q__container\",\n});\n","\"use client\";\n\nimport css from \"./LoginManager.module.css\";\nimport Button from \"@/components/Button/Button\";\nimport {useRouter} from \"next/navigation\";\nimport {useModal} from \"@/utils/ModalContext\";\nimport {Header} from \"@/components/Header/Header\";\nimport {mutate} from \"swr\";\n\nexport const LoginManager = () => {\n    const router = useRouter();\n    const [showModal, closeModal] = useModal();\n\n    const logOut = async () => {\n        const res = await fetch(\"/api/logout.php\", {\n            credentials: \"include\",\n            method: \"POST\",\n        })\n\n        if (!res.ok) {\n            console.error(\"LoginManager: \", `failed to fetch, C: ${res.status}`)\n            return;\n        }\n        await mutate(\"/user/index.php\");\n        router.push(\"/\");\n    }\n    const deleteAccount = async () => {\n        const del = async () => {\n            //TODO\n        }\n        showModal((<div className={css.container}>\n            <Header size={\"1.1rem\"}>Are you sure?</Header>\n            <Button onClick={del} backgroundColor={\"var(--yellow-color)\"}>I want to DELETE my account</Button>\n            <Button onClick={closeModal}>Cancel</Button>\n        </div>));\n    }\n\n    return (\n        <div className={css.container}>\n            <Button\n                onClick={logOut}\n                backgroundColor={\"var(--yellow-color)\"}\n            >Log Out</Button>\n            <Button\n                onClick={deleteAccount}\n                backgroundColor={\"var(--red-color)\"}\n            >Delete account</Button>\n        </div>\n    );\n};"],"names":[],"mappings":"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","ignoreList":[1,2]}