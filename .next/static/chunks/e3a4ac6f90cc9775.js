(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{70601:e=>{var{g:a,__dirname:t}=e;e.v({className:"poppins_9ac3ec3-module__ogIsha__className"})},15614:e=>{"use strict";var{g:a,__dirname:t}=e;{e.s({default:()=>t});var i=e.i(70601);let a={className:i.default.className,style:{fontFamily:"'Poppins', sans-serif",fontStyle:"normal"}};null!=i.default.variable&&(a.variable=i.default.variable);let t=a}},37234:e=>{var{g:a,__dirname:t}=e;e.v({className:"roboto_d5b2c989-module__7PeVaG__className"})},27660:e=>{"use strict";var{g:a,__dirname:t}=e;{e.s({default:()=>t});var i=e.i(37234);let a={className:i.default.className,style:{fontFamily:"'Roboto', sans-serif",fontStyle:"normal"}};null!=i.default.variable&&(a.variable=i.default.variable);let t=a}},63836:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({}),e.i(15614),e.i(27660)},15141:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({}),e.i(15614),e.i(27660),e.i(63836)},27844:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({poppins:()=>i.default});var i=e.i(15614)},92197:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({mutate:()=>i.j});var i=e.i(37784)},27426:e=>{"use strict";var{g:a,__dirname:t}=e;{e.s({Category:()=>a});var i=e.i(39563);class a{alias=[];id=0;name="";fill(e){Object.assign(this,e)}static getFilled(e){let t=new a;return t.fill(e),t}static async getById(e){let t=await fetch("/api/categories/index.php?id="+e),s=null;try{s=await t.json()}catch(e){console.error(`Category ERROR: ${e}`)}if(!t.ok)throw console.error(`Category ERROR: ${s}`),new i.JsonError(t.status,s);return a.getFilled(s?.d)}}}},5085:e=>{var{g:a,__dirname:t}=e;e.v({container:"Card-module__pmewmq__container"})},2512:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({Card:()=>r});var i=e.i(31636),s=e.i(5085);function r(e){let a={padding:e.padding};return(0,i.jsx)("div",{className:s.default.container,style:a,children:e.children})}},33556:e=>{var{g:a,__dirname:t}=e;e.v({addAliasContainer:"CategoryEditor-module__xhfZ3G__addAliasContainer",addButton:"CategoryEditor-module__xhfZ3G__addButton",aliasItem:"CategoryEditor-module__xhfZ3G__aliasItem",aliasList:"CategoryEditor-module__xhfZ3G__aliasList",container:"CategoryEditor-module__xhfZ3G__container",emptyMessage:"CategoryEditor-module__xhfZ3G__emptyMessage",form:"CategoryEditor-module__xhfZ3G__form",formGroup:"CategoryEditor-module__xhfZ3G__formGroup",input:"CategoryEditor-module__xhfZ3G__input",label:"CategoryEditor-module__xhfZ3G__label",message:"CategoryEditor-module__xhfZ3G__message",removeButton:"CategoryEditor-module__xhfZ3G__removeButton",submitButton:"CategoryEditor-module__xhfZ3G__submitButton",title:"CategoryEditor-module__xhfZ3G__title"})},11332:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({default:()=>u});var i=e.i(31636),s=e.i(38653),r=e.i(2512);e.i(15141);var l=e.i(27844),o=e.i(33556),d=e.i(27426),n=e.i(55366),c=e.i(92197);function u(){let e=(0,n.useSearchParams)().get("id"),[a,t]=(0,s.useState)(e?"edit":"create"),[u,m]=(0,s.useState)(""),[f,g]=(0,s.useState)([]),[_,h]=(0,s.useState)(""),[p,y]=(0,s.useState)(!1),[v,x]=(0,s.useState)("");(0,s.useEffect)(()=>{"edit"===a&&e&&(async()=>{y(!0);try{let a=await d.Category.getById(parseInt(e));m(a.name),g(a.alias||[])}catch(e){console.error("Error fetching category:",e),x(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{y(!1)}})()},[a,e]);let C=async e=>{(await fetch("/api/categories/alias.php?id="+e,{credentials:"include",method:"DELETE"})).ok||x("Failed to delete alias"),g(f.filter(a=>a.alias_id!==e)),x(`Alias ${e} deleted successfully!`)},b=async t=>{t.preventDefault(),y(!0),x("");try{let t=new FormData;t.append("name",u);let i={name:u,id:e?parseInt(e):void 0},s=await fetch("/api/categories/index.php",{method:"create"===a?"POST":"PUT",credentials:"include",body:"create"===a?t:JSON.stringify(i)});if(!s.ok)throw Error("Failed to save category");let r=await s.json(),l="create"===a?r.d.id:parseInt(e);for(let e of f)e.alias_id<0?await fetch("/api/categories/alias.php",{method:"POST",credentials:"include",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({alias:e.name,category_id:l.toString()})}):"edit"===a&&await fetch("/api/categories/alias.php",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.alias_id,alias:e.name,category_id:l})});x(`Category ${"create"===a?"created":"updated"} successfully!`),"create"===a&&(m(""),g([])),await (0,c.mutate)("/categories/index.php")}catch(e){console.error(`Error ${"create"===a?"creating":"updating"} category:`,e),x(`Error: ${e instanceof Error?e.message:"Unknown error"}`)}finally{y(!1)}};return(0,i.jsxs)("div",{className:[l.poppins.className,o.default.container].join(" "),children:[(0,i.jsx)("h1",{className:o.default.title,children:"create"===a?"Create New Category":"Edit Category"}),(0,i.jsx)(r.Card,{children:(0,i.jsxs)("form",{onSubmit:b,className:o.default.form,children:[(0,i.jsxs)("div",{className:o.default.formGroup,children:[(0,i.jsx)("label",{htmlFor:"name",className:o.default.label,children:"Category Name"}),(0,i.jsx)("input",{id:"name",type:"text",value:u,onChange:e=>m(e.target.value),required:!0,className:o.default.input})]}),(0,i.jsxs)("div",{className:o.default.formGroup,children:[(0,i.jsx)("label",{className:o.default.label,children:"Aliases"}),(0,i.jsx)("div",{className:o.default.aliasList,children:f.length>0?f.map(e=>(0,i.jsxs)("div",{className:o.default.aliasItem,children:[(0,i.jsx)("span",{children:e.name}),(0,i.jsx)("button",{type:"button",onClick:()=>C(e.alias_id),className:o.default.removeButton,children:"Remove"})]},e.alias_id)):(0,i.jsx)("div",{className:o.default.emptyMessage,children:"No aliases added"})}),(0,i.jsxs)("div",{className:o.default.addAliasContainer,children:[(0,i.jsx)("input",{type:"text",value:_,onChange:e=>h(e.target.value),placeholder:"Enter new alias",className:o.default.input}),(0,i.jsx)("button",{type:"button",onClick:()=>{_.trim()&&(g([...f,{alias_id:-Date.now(),name:_.trim()}]),h(""))},className:o.default.addButton,children:"Add Alias"})]})]}),(0,i.jsx)("div",{className:o.default.formGroup,children:(0,i.jsx)("button",{type:"submit",className:o.default.submitButton,disabled:p,children:p?"Saving...":"Save Category"})}),v&&(0,i.jsx)("div",{className:o.default.message,children:v})]})})]})}},44817:e=>{"use strict";var{g:a,__dirname:t}=e;e.s({default:()=>l});var i=e.i(31636),s=e.i(38653),r=e.i(11332);function l(){return(0,i.jsx)("div",{children:(0,i.jsx)(s.Suspense,{children:(0,i.jsx)(r.default,{})})})}}}]);

//# sourceMappingURL=fa1d846ff503720c.js.map