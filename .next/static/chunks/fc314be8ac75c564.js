(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{70601:e=>{var{g:t,__dirname:a}=e;e.v({className:"poppins_9ac3ec3-module__ogIsha__className"})},15614:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(70601);let t={className:i.default.className,style:{fontFamily:"'Poppins', sans-serif",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},37234:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_d5b2c989-module__7PeVaG__className"})},27660:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(37234);let t={className:i.default.className,style:{fontFamily:"'Roboto', sans-serif",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},63836:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({}),e.i(15614),e.i(27660)},15141:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({}),e.i(15614),e.i(27660),e.i(63836)},27844:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({poppins:()=>i.default});var i=e.i(15614)},92197:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({mutate:()=>i.j});var i=e.i(37784)},21554:e=>{var{g:t,__dirname:a}=e;e.v({container:"Loading-module__5VDP-q__container",pulse:"Loading-module__5VDP-q__pulse"})},49641:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({Loading:()=>n});var i=e.i(31636),l=e.i(21554);function n(e){return(0,i.jsx)("span",{className:l.default.container,children:e.children})}},82653:function(e){var{g:t,__dirname:a,m:i,e:l}=e;{e.i(22271);"use strict";Object.defineProperty(l,"__esModule",{value:!0});var n={default:function(){return o},getImageProps:function(){return r}};for(var s in n)Object.defineProperty(l,s,{enumerable:!0,get:n[s]});let t=e.r(13314),a=e.r(61311),i=e.r(11772),d=t._(e.r(55836));function r(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:d.default,imgConf:JSON.parse('{"deviceSizes":[640,750,828,1080,1200,1920,2048,3840],"imageSizes":[16,32,48,64,96,128,256,384],"path":"/_next/image","loader":"default","dangerouslyAllowSVG":false,"unoptimized":true}')});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let o=i.Image}},12568:function(e){var{g:t,__dirname:a,m:i,e:l}=e;i.exports=e.r(82653)},45622:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({ApiImage:()=>a,Attachment:()=>t});var i=e.i(39563);class t{attachment_id=0;author_id=0;creation_date=0;images=[];fill(e){Object.assign(this,e)}getImages(){return this.images.map(e=>a.getFilled(e))}static getFilled(e){let a=new t;return a.fill(e),a}static async fetchById(e){try{let a=await fetch("/api/attachments/index.php?id="+e),l=await a.json();if(!a.ok)throw new i.JsonError(a.status,l);return t.getFilled(l?.d)}catch(e){throw console.error(`Attachment ERROR: ${e}`),e}}}class a{id=0;size=0;type="";fill(e){Object.assign(this,e)}static getFilled(e){let t=new a;return t.fill(e),t}getURL(){return"/api/attachments/image.php?id="+this.id}}}},16654:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({RequireAuth:()=>t});var i=e.i(31636),l=e.i(55366),n=e.i(81952);let t=e=>{let t=(0,l.useRouter)(),{isLoggedIn:a,user:s,error:r,isLoading:d}=(0,n.default)();if(d)return(0,i.jsx)(i.Fragment,{});let o=()=>{console.error("RequireAuth: ","redirecting to '",e.href||"/","'"),"back"===e.href&&t.back(),t.push(e.href||"/")};return("loggedIn"!==e.type||a)&&("admin"!==e.type||a&&0!==s.permission)?"loggedOut"===e.type&&a&&o():o(),(0,i.jsx)(i.Fragment,{})}}},9669:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({roboto:()=>i.default});var i=e.i(27660)},19386:e=>{var{g:t,__dirname:a}=e;e.v({container:"Input-module__tSvyFa__container"})},74664:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({Input:()=>s});var i=e.i(31636),l=e.i(19386),n=e.i(38653);function s(e){let[t,a]=(0,n.useState)(e.value||"");return(0,i.jsx)("div",{className:l.default.container,children:(0,i.jsx)("input",{name:e.name||void 0,onChange:t=>{void 0!=e.onChange?e.onChange(t):a(t.target.value)},value:e.value||t,type:e.type||"text",placeholder:e.placeholder||void 0})})}},18408:e=>{var{g:t,__dirname:a}=e;e.v({container:"Button-module__8cr-Ka__container"})},96150:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_498287c9-module__wIVGaW__className"})},103:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(96150);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:400,fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},81508:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>s});var i=e.i(31636),l=e.i(18408),n=e.i(103);function s(e){let t={"--Color":e.color||"white","--BColor":e.backgroundColor||"var(--green-color)"};return(0,i.jsx)("div",{style:t,className:[n.default.className,l.default.container].join(" "),onClick:e.onClick,children:e.children})}},35845:e=>{var{g:t,__dirname:a}=e;e.v({addEntry:"BillingAddress-module__9nUpIG__addEntry",container:"BillingAddress-module__9nUpIG__container",entry:"BillingAddress-module__9nUpIG__entry",entryAction:"BillingAddress-module__9nUpIG__entryAction"})},62522:e=>{var{g:t,__dirname:a}=e;e.v({container:"Table-module__P1YERa__container"})},54015:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({Table:()=>t});var i=e.i(31636),l=e.i(62522);let t=e=>(0,i.jsx)("div",{className:l.default.container,style:{rowGap:e.rowGap,columnGap:e.columnGap},children:e.children})}},71159:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({TableField:()=>l});var i=e.i(31636);function l(e){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{children:e.value}),(0,i.jsx)("div",{children:e.children})]})}},27748:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({useAddress:()=>l});var i=e.i(23663);function l(){let{data:e,isLoading:t,error:a}=(0,i.default)("/shipping_address/index.php");return{isLoading:t,error:a,data:e,addresses:e?.d}}},82922:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({BillingAddressManager:()=>h});var i=e.i(31636),l=e.i(35845);e.i(15141);var n=e.i(9669),s=e.i(98435),r=e.i(38653),d=e.i(54015),o=e.i(71159),c=e.i(74664),u=e.i(27748),m=e.i(92197);function h(e){let[t,a]=(0,r.useState)(null),[[s,d],o]=(0,r.useState)(["view",0]),{addresses:c,isLoading:m,error:h}=(0,u.useAddress)(),f=t=>{a(t),e.onSelect&&e.onSelect(t)};return(0,i.jsxs)("div",{style:n.roboto.style,className:l.default.container,children:["view"===s||(0,i.jsx)(p,{mode:s,id:d,setMode:o}),(0,i.jsx)(()=>{if(!m&&"view"===s&&!h)return c?.map(a=>{let l=[`${a.first_name} ${a.last_name},`,`${a.phone_number},`,`${a.city}, ${a.postal_code},`,`${a.street}, ${a.building_number}, ${a.apartment_number||""}`];return(0,i.jsx)(v,{id:a.shipping_address_id,values:l,selected:a.shipping_address_id===t,showActions:!e.DontShowActions,onSelect:e.DontSelect?void 0:()=>f(a.shipping_address_id),setMode:o},a.shipping_address_id)})},{}),"view"!=s||(e.DontRenderAddEntry?null:(0,i.jsx)(_,{setMode:o}))]})}function v(e){let t={borderColor:e.selected?"black":void 0},a=async()=>{let t=await fetch(`/api/shipping_address/index.php?id=${e.id}`,{method:"DELETE",credentials:"include"});if(!t.ok){console.error("BillingAddressManager: ",`failed to fetch, C: ${t.status}`),console.error("BillingAddressManager: ",await t.json());return}await (0,m.mutate)("/shipping_address/index.php")};return(0,i.jsxs)("div",{className:l.default.entry,style:t,onClick:e.onSelect,children:[(0,i.jsx)("div",{children:e.values.map((e,t)=>(0,i.jsx)("span",{children:e},t))}),e.showActions?(0,i.jsxs)("div",{className:l.default.entryAction,children:[(0,i.jsx)("span",{onClick:()=>{e.setMode(["edit",e.id])},children:"Edit"}),(0,i.jsx)("span",{onClick:a,children:"Delete"})]}):null]})}function _({setMode:e}){return(0,i.jsx)("div",{className:[l.default.entry,l.default.addEntry].join(" "),onClick:()=>{e(["create",0])},children:(0,i.jsx)(s.default,{wght:500,GRAD:200,fontSize:"2rem",children:"add"})})}function p(e){let[t,a]=(0,r.useState)("edit"===e.mode),[n,s]=(0,r.useState)(null),[u,h]=(0,r.useState)({first_name:"",last_name:"",phone_number:"",postal_code:"",city:"",street:"",building_number:"",apartment_number:""});(0,r.useEffect)(()=>{(async()=>{if("edit"!==e.mode)return;let t=await fetch(`/api/shipping_address/id.php?id=${e.id||0}`,{method:"GET",credentials:"include"});if(!t.ok){console.error("BillingAddressManager: ",`failed to fetch, C: ${t.status}`);let e=await t.json();console.error("BillingAddressManager: ",e),_(e?.d);return}h((await t.json()).d),a(!1)})()},[]);let v=e=>{console.log("now");let{name:t,value:a}=e.target;if("phone_number"===t){let e=a.replace(/[^0-9]/g,"");e=((e=e.slice(0,9)).match(/.{1,3}/g)??[]).join("-"),h({...u,[t]:e})}else if("postal_code"===t){let e=a.replace(/[^0-9]/g,"");(e=e.slice(0,5)).length>2&&(e=e.slice(0,2)+"-"+e.slice(2)),h({...u,[t]:e})}else if(["apartment_number","building_number"].includes(t)){let e=a.replace(/[^0-9]/g,"");h({...u,[t]:e})}else h({...u,[t]:a})},_=e=>{s(e)},p=async t=>{t.preventDefault(),a(!0);let i=new FormData(t.currentTarget);"edit"===e.mode&&i.append("id",e.id.toString());let l=Object.fromEntries(i.entries()),n=await fetch("/api/shipping_address/index.php",{method:"create"===e.mode?"POST":"PUT",credentials:"include",body:"create"===e.mode?i:JSON.stringify(l)});if(!n.ok){if(console.error("BillingAddressManager: ",`failed to fetch, C: ${n.status}`),404==n.status)_("not found");else{let e=await n.json();console.error("BillingAddressManager: ",e),_(`error: ${n.status}, ${e?.d}`)}return}console.log("BillingAddressManager: ",await n.json()),await (0,m.mutate)("/shipping_address/index.php"),a(!1),e.setMode(["view",0])};return t?(0,i.jsx)("span",{children:"Loading"}):(0,i.jsxs)("form",{onSubmit:p,children:[(0,i.jsx)("div",{children:(0,i.jsxs)(d.Table,{children:[(0,i.jsx)(o.TableField,{value:"First name",children:(0,i.jsx)(c.Input,{name:"first_name",placeholder:"John",value:u.first_name,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Last name",children:(0,i.jsx)(c.Input,{name:"last_name",placeholder:"Smith",value:u.last_name,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Phone number",children:(0,i.jsx)(c.Input,{type:"tel",name:"phone_number",placeholder:"000-000-000",value:u.phone_number,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Postal code",children:(0,i.jsx)(c.Input,{name:"postal_code",placeholder:"34-600",value:u.postal_code,onChange:v})}),(0,i.jsx)(o.TableField,{value:"City",children:(0,i.jsx)(c.Input,{name:"city",placeholder:"Warszawa",value:u.city,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Street name",children:(0,i.jsx)(c.Input,{name:"street",placeholder:"ul. Limonkowa",value:u.street,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Building number",children:(0,i.jsx)(c.Input,{name:"building_number",placeholder:"155",value:u.building_number,onChange:v})}),(0,i.jsx)(o.TableField,{value:"Apartment number",children:(0,i.jsx)(c.Input,{name:"apartment_number",placeholder:"3",value:u.apartment_number,onChange:v})})]})}),(0,i.jsxs)("div",{className:l.default.entryAction,children:[(0,i.jsx)("input",{type:"submit",value:"Save"}),(0,i.jsx)("span",{onClick:()=>{e.setMode(["view",0])},children:"Cancel"}),(0,i.jsx)("span",{className:l.default.error,children:n})]})]})}},64682:e=>{var{g:t,__dirname:a}=e;e.v({container:"Header-module__arFiJq__container"})},80438:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({Header:()=>t});var i=e.i(31636),l=e.i(64682);e.i(15141);var n=e.i(27844);let t=e=>{let t={...n.poppins.style,padding:e.padding,fontSize:e.size,fontWeight:e.weight};return(0,i.jsx)("div",{className:l.default.container,style:t,children:e.children})}}},84066:e=>{var{g:t,__dirname:a}=e;e.v({container:"Checkout-module__3nKqhq__container",list:"Checkout-module__3nKqhq__list"})},30208:e=>{var{g:t,__dirname:a}=e;e.v({className:"poppins_b11605ca-module__FCE4Ca__className"})},61760:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(30208);let t={className:i.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},16094:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_ded5674b-module__QqbLJq__className"})},9358:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(16094);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},96369:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({useCart:()=>l});var i=e.i(23663);function l(){let{data:e,isLoading:t,error:a}=(0,i.default)("/cart/index.php");return{isLoading:t,error:a,data:e,items:e?.d.items,info:e?.d.data}}},5433:e=>{var{g:t,__dirname:a}=e;e.v({container:"PaymentGate-module__uRVTOW__container",content:"PaymentGate-module__uRVTOW__content",hover:"PaymentGate-module__uRVTOW__hover",nav:"PaymentGate-module__uRVTOW__nav"})},92854:e=>{var{g:t,__dirname:a}=e;e.v({container:"PaymentSelector-module__6c2nhW__container",selected:"PaymentSelector-module__6c2nhW__selected"})},69584:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({useProvider:()=>l});var i=e.i(23663);function l(){let{data:e,isLoading:t,error:a}=(0,i.default)("/provider/index.php");return{isLoading:t,error:a,data:e,providers:e?.d}}},37945:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({PaymentSelector:()=>t,ProviderField:()=>a});var i=e.i(31636),l=e.i(92854),n=e.i(38653),s=e.i(69584);e.i(15141);var r=e.i(27844);let t=e=>{let{isLoading:t,error:d,providers:o}=(0,s.useProvider)(),[c,u]=(0,n.useState)(null),m=t=>{u(t),e.onSelect&&e.onSelect(t)};if(!t&&!d)return(0,i.jsx)("div",{className:l.default.container,style:r.poppins.style,children:o.map(e=>(0,i.jsx)(a,{onSelect:()=>m(e.provider_id),selected:c===e.provider_id,children:e.name},e.provider_id))})},a=e=>(0,i.jsx)("div",{className:e.selected?l.default.selected:void 0,onClick:e.onSelect,children:e.children})}},10807:e=>{var{g:t,__dirname:a}=e;e.v({container:"PaymentSummary-module__RFb9PG__container",listItem:"PaymentSummary-module__RFb9PG__listItem",name:"PaymentSummary-module__RFb9PG__name",value:"PaymentSummary-module__RFb9PG__value"})},88973:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({Later:()=>h,ListItem:()=>m,PaymentSummary:()=>t});var i=e.i(31636),l=e.i(10807),n=e.i(96369),s=e.i(27748);e.i(15141);var r=e.i(27844),d=e.i(38653),o=e.i(81508),c=e.i(49641),u=e.i(69584);let t=e=>{let t=(0,n.useCart)(),a=(0,s.useAddress)(),c=(0,u.useProvider)(),[v,_]=(0,d.useState)(void 0),[p,f]=(0,d.useState)(void 0);(0,d.useEffect)(()=>{t.isLoading||a.isLoading||c.isLoading||(f(c.providers.find(t=>t.provider_id===e.paymentMethodId)),_(a.addresses.find(t=>t.shipping_address_id===e.billingAddressId)))},[e.paymentMethodId,e.billingAddressId,t,a,c]);let g=async()=>{if(!e.billingAddressId||!e.paymentMethodId)return;let t=new FormData;t.append("shipping_address_id",e.billingAddressId.toString()),t.append("provider_id",e.paymentMethodId.toString());let a=await fetch("/api/checkout/index.php",{credentials:"include",method:"POST",body:t});if(!a.ok)try{let e=await a.json();console.error("onPay error: ",e)}catch(e){console.error("onPay error:",e)}console.log(await a.json())};return(0,i.jsxs)("div",{className:[l.default.container,r.poppins.className].join(" "),children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(m,{name:"Payment Method:",children:(0,i.jsx)(h,{children:p?.name})}),(0,i.jsx)(m,{name:"Phone Number:",children:(0,i.jsx)(h,{children:v?.phone_number})}),(0,i.jsx)(m,{name:"Taker:",children:(0,i.jsx)(h,{children:v?`${v.first_name} ${v.last_name}`:void 0})}),(0,i.jsx)(m,{name:"To pay:",children:(0,i.jsxs)(h,{children:[t.info.total_price,"zł"]})})]}),(0,i.jsx)("div",{children:(0,i.jsx)(o.default,{onClick:g,children:"Pay"})})]})};function m(e){return(0,i.jsxs)("div",{className:l.default.listItem,children:[(0,i.jsx)("span",{className:l.default.name,children:e.name}),(0,i.jsx)("span",{className:l.default.value,children:e.children})]})}function h(e){return e.children?e.children:(0,i.jsx)(c.Loading,{children:"-"})}}},39117:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({PaymentGate:()=>t});var i=e.i(31636),l=e.i(5433),n=e.i(45542),s=e.i(82922),r=e.i(38653),d=e.i(37945),o=e.i(80438),c=e.i(88973);let t=()=>{let[e,t]=(0,n.useModal)(),[a,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(null);return(0,i.jsxs)("div",{className:l.default.container,children:[(0,i.jsx)("div",{className:l.default.nav,children:(0,i.jsx)("div",{className:l.default.hover,onClick:t,children:"x"})}),(0,i.jsxs)("div",{className:l.default.content,children:[(0,i.jsxs)("div",{className:l.default.selectors,children:[(0,i.jsx)(o.Header,{padding:"0",children:"Billing Address"}),(0,i.jsx)(s.BillingAddressManager,{onSelect:e=>u(e)}),(0,i.jsx)(o.Header,{padding:"0",children:"Payment Method"}),(0,i.jsx)(d.PaymentSelector,{onSelect:e=>h(e)})]}),(0,i.jsxs)("div",{className:l.default.gate,children:[(0,i.jsx)(o.Header,{padding:"0",children:"Payment"}),(0,i.jsx)(c.PaymentSummary,{paymentMethodId:m||void 0,billingAddressId:a||void 0})]})]})]})}}},33683:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>u});var i=e.i(31636),l=e.i(84066),n=e.i(61760),s=e.i(9358),r=e.i(81508),d=e.i(96369),o=e.i(45542),c=e.i(39117);let t=e=>(0,i.jsxs)("div",{children:[(0,i.jsx)("span",{className:n.default.className,children:e.title}),(0,i.jsx)("span",{className:s.default.className,children:e.value})]});function u(){let[e,a]=(0,o.useModal)(),{info:n,isLoading:s,error:u}=(0,d.useCart)();if(s||u)return;let m=async()=>{e((0,i.jsx)(c.PaymentGate,{}))};return(0,i.jsxs)("div",{className:l.default.container,children:[(0,i.jsxs)("div",{className:l.default.list,children:[(0,i.jsx)(t,{title:"items:",value:`${n.count} (${n.total_quantity})`}),(0,i.jsx)(t,{title:"To pay:",value:n.total_price+" zł"})]}),(0,i.jsx)(r.default,{onClick:m,children:"Pay"})]})}}},121:e=>{var{g:t,__dirname:a}=e;e.v({action:"CheckOutItem-module__qzqfhq__action",container:"CheckOutItem-module__qzqfhq__container",content:"CheckOutItem-module__qzqfhq__content",delete:"CheckOutItem-module__qzqfhq__delete",description:"CheckOutItem-module__qzqfhq__description",hover:"CheckOutItem-module__qzqfhq__hover",imageContainer:"CheckOutItem-module__qzqfhq__imageContainer"})},85890:e=>{var{g:t,__dirname:a}=e;e.v({className:"poppins_3319a657-module__LbkbKG__className"})},33851:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(85890);let t={className:i.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},87560:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_7f5a3e31-module__Jw1u0G__className"})},15323:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(87560);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},23370:e=>{var{g:t,__dirname:a}=e;e.v({container:"QuantitySelector-module__75WamW__container"})},23580:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_aa8c407-module__tRwEhG__className"})},85221:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(23580);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},53109:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>s});var i=e.i(31636),l=e.i(23370),n=e.i(85221);function s(e){return(0,i.jsxs)("div",{style:n.default.style,className:l.default.container,children:[(0,i.jsx)("div",{onClick:()=>{e.setValue?.(e.value-1)},children:"-"}),(0,i.jsx)("div",{children:e.value}),(0,i.jsx)("div",{onClick:()=>{e.setValue?.(e.value+1)},children:"+"})]})}},23119:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>m});var i=e.i(31636),l=e.i(121),n=e.i(12568),s=e.i(33851),r=e.i(15323),d=e.i(98435),o=e.i(53109),c=e.i(38653),u=e.i(55366);function m(e){let t=(0,u.useRouter)(),[a,m]=(0,c.useState)(e.quantity||2);return(0,i.jsxs)("div",{className:l.default.container,children:[(0,i.jsx)("div",{className:l.default.imageContainer,children:(0,i.jsx)(n.default,{src:e.imageURL||"https://placehold.co/600x600",alt:"picture of product",fill:!0})}),(0,i.jsxs)("div",{className:l.default.content,children:[(0,i.jsxs)("div",{className:l.default.description,children:[(0,i.jsx)("div",{className:l.default.hover,onClick:()=>{e.gotoURL&&t.push(e.gotoURL)},children:(0,i.jsx)("span",{className:s.default.className,children:e.title||"NONE"})}),(0,i.jsx)("div",{className:l.default.delete,onClick:e.OnDelete,children:(0,i.jsx)(d.default,{wght:100,fontSize:"2.3rem",children:"delete"})})]}),(0,i.jsxs)("div",{className:l.default.action,children:[(0,i.jsx)("div",{children:(0,i.jsxs)("span",{className:r.default.className,children:[e.price,"zł"]})}),(0,i.jsx)(o.default,{value:a,setValue:t=>{t<0||(m(t),void 0!=e.OnQuantityChange&&e.OnQuantityChange(t))}})]})]})]})}},32992:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({CartItem:()=>t});var i=e.i(45622);class t{attachment_id=null;cart_item_id=0;name="";price=0;product_id=0;quantity=0;user_id=0;fill(e){Object.assign(this,e)}static getFilled(e){let a=new t;return a.fill(e),a}fetchAttachment(){return this.attachment_id?i.Attachment.fetchById(this.attachment_id):null}}}},48389:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({CartItemView:()=>a,CartItemsList:()=>t});var i=e.i(31636),l=e.i(96369),n=e.i(23119),s=e.i(38653),r=e.i(32992),d=e.i(16488),o=e.i(92197);let t=()=>{let{isLoading:e,error:t,items:n}=(0,l.useCart)();if(!e&&!t)return(0,i.jsx)(i.Fragment,{children:n.map(e=>(0,i.jsx)(a,{value:e},e.cart_item_id))})},a=e=>{let[t,a]=(0,s.useState)(null),l=r.CartItem.getFilled(e.value),[c,u]=(0,s.useState)(l.quantity),m=(0,d.useDebounce)(c);(0,s.useEffect)(()=>{(async()=>{let e=await l.fetchAttachment();e&&a(e.getImages()[0].getURL())})()},[]),(0,s.useEffect)(()=>{(async()=>{if(0===m)return await h();let e={product_id:l.product_id,quantity:m},t=await fetch("/api/cart/index.php",{credentials:"include",method:"PUT",body:JSON.stringify(e)});if(!t.ok){console.error("CartItemView: ",`failed to fetch, ${t}`),console.error("CartItemView: ",await t.json());return}await (0,o.mutate)("/cart/index.php")})()},[m]);let h=async()=>{let e=await fetch(`/api/cart/index.php?id=${l.cart_item_id}`,{credentials:"include",method:"DELETE"});e.ok||console.error("CartItemView: ",`failed to fetch, ${e}`),await (0,o.mutate)("/cart/index.php")};return(0,i.jsx)(n.default,{price:l.price.toString(),quantity:c,title:l.name,imageURL:t||"https://placehold.co/600x600",OnDelete:h,OnQuantityChange:e=>{u(e)},gotoURL:"/product?id="+l.product_id})}}}}]);

//# sourceMappingURL=023102f79f8c280c.js.map