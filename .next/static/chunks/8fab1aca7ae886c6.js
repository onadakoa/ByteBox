(globalThis.TURBOPACK=globalThis.TURBOPACK||[]).push(["object"==typeof document?document.currentScript:void 0,{82069:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({Product:()=>t});var i=e.i(27426),r=e.i(45622);class t{product_id=0;attachment_id=null;category_id=null;author_id=0;name="";description="";price=0;stock=0;fill(e){Object.assign(this,e)}static getFilled(e){let a=new t;return a.fill(e),a}getCategory(){return this.category_id?i.Category.getById(this.category_id):null}fetchAttachment(){return this.attachment_id?r.Attachment.fetchById(this.attachment_id):null}}}},27426:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({Category:()=>t});var i=e.i(39563);class t{alias=[];id=0;name="";fill(e){Object.assign(this,e)}static getFilled(e){let a=new t;return a.fill(e),a}static async getById(e){let a=await fetch("/api/categories/index.php?id="+e),r=null;try{r=await a.json()}catch(e){console.error(`Category ERROR: ${e}`)}if(!a.ok)throw console.error(`Category ERROR: ${r}`),new i.JsonError(a.status,r);return t.getFilled(r?.d)}}}},82653:function(e){var{g:t,__dirname:a,m:i,e:r}=e;{e.i(22271);"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l={default:function(){return c},getImageProps:function(){return s}};for(var n in l)Object.defineProperty(r,n,{enumerable:!0,get:l[n]});let t=e.r(13314),a=e.r(61311),i=e.r(11772),o=t._(e.r(55836));function s(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:o.default,imgConf:JSON.parse('{"deviceSizes":[640,750,828,1080,1200,1920,2048,3840],"imageSizes":[16,32,48,64,96,128,256,384],"path":"/_next/image","loader":"default","dangerouslyAllowSVG":false,"unoptimized":true}')});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let c=i.Image}},12568:function(e){var{g:t,__dirname:a,m:i,e:r}=e;i.exports=e.r(82653)},45622:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({ApiImage:()=>a,Attachment:()=>t});var i=e.i(39563);class t{attachment_id=0;author_id=0;creation_date=0;images=[];fill(e){Object.assign(this,e)}getImages(){return this.images.map(e=>a.getFilled(e))}static getFilled(e){let a=new t;return a.fill(e),a}static async fetchById(e){try{let a=await fetch("/api/attachments/index.php?id="+e),r=await a.json();if(!a.ok)throw new i.JsonError(a.status,r);return t.getFilled(r?.d)}catch(e){throw console.error(`Attachment ERROR: ${e}`),e}}}class a{id=0;size=0;type="";fill(e){Object.assign(this,e)}static getFilled(e){let t=new a;return t.fill(e),t}getURL(){return"/api/attachments/image.php?id="+this.id}}}},16194:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>r});var i=e.i(23663);function r(e={}){let t=new URLSearchParams;e.search&&t.append("search",e.search),e.limit&&t.append("limit",e.limit.toString()),e.page&&t.append("page",e.page.toString()),e.category&&t.append("category",e.category.toString()),e.price_in&&t.append("price_in",e.price_in.toString()),e.price_out&&t.append("price_out",e.price_out.toString()),e.sort&&t.append("sort",e.sort);let{data:a,isLoading:l,error:n,mutate:s}=(0,i.default)(`/products/index.php?${t.toString()}`);return{isLoading:l,error:n,data:a,products:a?.d,mutate:s}}},75889:e=>{var{g:t,__dirname:a}=e;e.v({container:"FilterBox-module__aWyjuG__container"})},84043:e=>{var{g:t,__dirname:a}=e;e.v({className:"poppins_ee298dbb-module__VNHDZq__className"})},49439:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(84043);let t={className:i.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontWeight:400,fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},27631:e=>{var{g:t,__dirname:a}=e;e.v({container:"FilterBoxItem-module__F9noWW__container"})},38806:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>l});var i=e.i(31636),r=e.i(27631);function l(e){return(0,i.jsxs)("div",{className:r.default.container,children:[(0,i.jsx)("span",{children:e.title}),(0,i.jsx)("div",{children:e.children})]})}},91314:e=>{var{g:t,__dirname:a}=e;e.v({container:"FilterBoxSelect-module__vqSVga__container"})},36848:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>l});var i=e.i(31636),r=e.i(91314);function l(e){return(0,i.jsx)("select",{className:r.default.container,value:e.value,onChange:t=>{e.onChange(t.target.value)},children:e.options.map((e,t)=>(0,i.jsx)("option",{value:e.value,children:e.span||e.value},e.value))})}},93501:e=>{var{g:t,__dirname:a}=e;e.v({container:"FilterBoxPrice-module__CDi7cq__container",priceInput:"FilterBoxPrice-module__CDi7cq__priceInput",spacer:"FilterBoxPrice-module__CDi7cq__spacer"})},99343:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_ee0f352c-module__sR2SPa__className"})},77236:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(99343);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:100,fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},2194:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>s});var i=e.i(31636),r=e.i(38653),l=e.i(93501),n=e.i(77236);function s(e){let t=(0,r.useRef)(null),a=(0,r.useRef)(null),s=()=>{e.onChange(t.current?.value||"",a.current?.value||"")};return(0,i.jsxs)("div",{className:l.default.container,children:[(0,i.jsxs)("label",{className:[n.default.className,l.default.priceInput].join(" "),children:[(0,i.jsx)("input",{type:"number",placeholder:"0",value:e.min,ref:t,onChange:()=>{s()}}),(0,i.jsx)("span",{children:"zł"})]}),(0,i.jsx)("div",{className:l.default.spacer}),(0,i.jsxs)("label",{className:[n.default.className,l.default.priceInput].join(" "),children:[(0,i.jsx)("input",{type:"number",placeholder:"0",value:e.max,ref:a,onChange:()=>{s()}}),(0,i.jsx)("span",{children:"zł"})]})]})}},57428:e=>{var{g:t,__dirname:a}=e;e.v({container:"FilterBoxSubmit-module__xxaR0a__container"})},3295:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>l});var i=e.i(31636),r=e.i(57428);function l(e){return(0,i.jsx)("div",{className:r.default.container,children:(0,i.jsx)("input",{type:"button",value:e.children,onClick:e.onClick})})}},44598:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>p});var i=e.i(31636),r=e.i(75889),l=e.i(49439),n=e.i(38806),s=e.i(36848),o=e.i(38653),c=e.i(2194),u=e.i(55366),d=e.i(3295);function p(){let e=(0,u.useRouter)(),t=(0,u.useSearchParams)(),[a,p]=(0,o.useState)(t.get("category")||"0"),[f,g]=(0,o.useState)(t.get("sort")||"P_ASC"),[m,v]=(0,o.useState)(t.get("price_in")||""),[h,_]=(0,o.useState)(t.get("price_out")||""),[x,j]=(0,o.useState)(null);return(0,o.useEffect)(()=>{(async()=>{let e=await fetch("/api/categories/index.php",{credentials:"include",method:"GET"});if(!e.ok)return console.error("FilterBox: ",`failed to fetch, ${e}`);let t=await e.json();if(t.c)return console.error("FilterBox: ",t);j([{value:"0",span:"-"},...t.d.map(e=>({value:e.id.toString(),span:e.name}))])})()},[]),(0,i.jsxs)("div",{className:[r.default.container,l.default.className].join(" "),children:[(0,i.jsx)(n.default,{title:"Kategoria",children:(0,i.jsx)(s.default,{options:x||[],value:a,onChange:e=>{if(!x)return;let t=x.find(t=>t.value===e);p(t?.value||"")}})}),(0,i.jsx)(n.default,{title:"Cena (min-max)",children:(0,i.jsx)(c.default,{min:m,max:h,onChange:(e,t)=>{v(e),_(t)}})}),(0,i.jsx)(n.default,{title:"Sortuj",children:(0,i.jsx)(s.default,{options:[{value:"P_ASC",span:"Cena (rosnąco)"},{value:"P_DESC",span:"Cena (malejąco)"}],value:f,onChange:e=>{g(e)}})}),(0,i.jsx)(d.default,{onClick:()=>{let i=new URLSearchParams,r=t.get("search")||"";i.append("search",r),a&&i.append("category",a),i.append("sort",f),i.append("price_in",m),i.append("price_out",h),e.push("/?"+i.toString())},children:"Zastosuj"})]})}},54197:e=>{var{g:t,__dirname:a}=e;e.v({bottom:"Feed-module__fd7aIq__bottom",container:"Feed-module__fd7aIq__container",top:"Feed-module__fd7aIq__top"})},18501:e=>{var{g:t,__dirname:a}=e;e.v({className:"poppins_80241296-module__WqxvLq__className"})},83039:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(18501);let t={className:i.default.className,style:{fontFamily:"'Poppins', 'Poppins Fallback'",fontWeight:400,fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},92328:e=>{var{g:t,__dirname:a}=e;e.v({className:"roboto_6dad0ff-module__abGRyG__className"})},74869:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({default:()=>a});var i=e.i(92328);let t={className:i.default.className,style:{fontFamily:"'Roboto', 'Roboto Fallback'",fontWeight:700,fontStyle:"normal"}};null!=i.default.variable&&(t.variable=i.default.variable);let a=t}},58549:e=>{"use strict";var{g:t,__dirname:a}=e;e.s({default:()=>c});var i=e.i(31636),r=e.i(12568),l=e.i(54197),n=e.i(83039),s=e.i(74869),o=e.i(86240);function c(e){return(0,i.jsxs)("div",{className:l.default.container,children:[(0,i.jsx)(o.default,{href:e.productHref||"/",children:(0,i.jsxs)("div",{className:l.default.top,children:[(0,i.jsx)("div",{children:(0,i.jsx)(r.default,{src:e.imageSrc||"https://placehold.co/600x600",alt:"image of product",fill:!0})}),(0,i.jsx)("span",{style:n.default.style,children:e.title})]})}),(0,i.jsx)("div",{className:l.default.bottom,children:(0,i.jsxs)("span",{style:s.default.style,children:[e.price," zł"]})})]})}},87857:e=>{"use strict";var{g:t,__dirname:a}=e;{e.s({ApiFeed:()=>t,ApiFeedContent:()=>a});var i=e.i(31636),r=e.i(16194),l=e.i(38653),n=e.i(58549),s=e.i(82069),o=e.i(55366);let t=()=>{let e=(0,o.useSearchParams)(),t=e.get("search")||void 0,l=Number(e.get("category"))||void 0,n=e.get("sort")||void 0,c=Number(e.get("price_in"))||void 0,u=Number(e.get("price_out"))||void 0,{products:d,isLoading:p,error:f}=(0,r.default)({search:t,sort:n,category:l,price_in:c,price_out:u});return p||f?"loading":(0,i.jsx)(i.Fragment,{children:d?.map(e=>{let t=s.Product.getFilled(e);return(0,i.jsx)(a,{product:t},t.product_id)})})},a=e=>{let[t,a]=(0,l.useState)(null);return(0,l.useEffect)(()=>{e.product.fetchAttachment()?.then(e=>{a(e)})},[]),(0,i.jsx)(n.default,{price:e.product.price,title:e.product.name,type:e.product.stock>0?"active":"unavailable",imageSrc:t?t.getImages()[0].getURL():void 0,productHref:"/product?id="+e.product.product_id})}}}}]);

//# sourceMappingURL=56f678bd1962704a.js.map